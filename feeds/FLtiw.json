{"items": [{"updated": 1366505172, "alternate": [{"href": "http://blog.geekple.com/2013/04/21/%ea%b3%a7-%ea%b0%9c%ec%9d%b8-%ec%8b%a0%ec%83%81%ec%97%90-%eb%b3%80%ed%99%94/", "type": "text/html"}], "title": "\uace7 \uac1c\uc778 \uc2e0\uc0c1\uc5d0 \ubcc0\ud654", "author": "Daegeun Kim", "content": {"content": "<p>2\ub144\ub3d9\uc548 \ub2e4\ub2cc \ud68c\uc0ac \uc815\ub9ac\ud558\uace0 \ud1f4\uc0ac.</p>\n<p>\uc880 \uc26c\uba74\uc11c \ud55c\ub3d9\uc548 \ucde8\ubbf8\ub85c \ucf54\ub529.!</p>\n<br>  "}, "published": 1366505172, "categories": []}, {"updated": 1366282948, "alternate": [{"href": "http://blog.geekple.com/2013/04/18/greader/", "type": "text/html"}], "title": "GReader", "author": "Daegeun Kim", "content": {"content": "<p>\uad6c\uae00 \ub9ac\ub354\uac00 \uace7 \uc5c6\uc5b4\uc9c4\ub2e4\uace0\ud558\uc5ec \uc7ac\ubbf8\uc0bc\uc544 \uc624\ub298 \ud504\ub860\ud2b8\uc5d4\ub4dc \ud398\uc774\uc9c0 \uc791\uc5c5\uc744 \ud574\ubd24\uc2b5\ub2c8\ub2e4.(\ucd08 \ub2e8\uc21c \ud398\uc774\uc9c0) \uc77c\ub2e8 \ud504\ub85c\ud1a0\ud0c0\uc774\ud551\uc774\ub77c\uc11c \ubc84\uadf8\uac00 \uc788\uc744 \uc218 \uc788\uc73c\ub2c8 \ucc38\uace0\ubc14\ub78d\ub2c8\ub2e4.</p>\n<p>\uc77c\ub2e8 \uc18c\uac1c \ud398\uc774\uc9c0\ub85c \uc4f8 \ud3ec\uc2a4\ud2b8\ub77c\uc11c \uba3c\uc800 \uc791\uc131\ud569\ub2c8\ub2e4.</p>\n<br>  "}, "published": 1366282948, "categories": []}, {"updated": 1364221861, "alternate": [{"href": "http://blog.geekple.com/2013/03/25/1711/", "type": "text/html"}], "title": "", "author": "Daegeun Kim", "content": {"content": "<p>128 posts / 8 pages / 119 comments / 71 drafts</p>\n<p>\ubc29\ubb38\uc790</p>\n<p>2012 01 ~ 12 &#61; 369 / 417 / 551 / \u2013 / \u2013 / \u2013 / 1,691<br>\n2013 01 ~ 03 &#61; 4344 / 4234 / -</p>\n<p>\ud5c8\uc811\ud55c \uae00 \uc77d\uc5b4\uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4.\u00a0\uc880 \ub354 \ubd84\ubc1c\ud558\uaca0\uc2b5\ub2c8\ub2e4.</p>\n<br>  "}, "published": 1364221861, "categories": []}, {"updated": 1364218757, "alternate": [{"href": "http://blog.geekple.com/2013/03/25/hbase-configuration-part-1/", "type": "text/html"}], "title": "HBase \u2013 Configuration Part 1", "author": "Daegeun Kim", "content": {"content": "<p>\uc8fc\ub9d0\uc5d0 \ucf54\ub4dc \ubcf4\uba74\uc11c \uae30\ub85d\ud588\ub358\uac74\ub370 \uc8fc\uc911\uc5d0\ub294 \ud560 \uc2dc\uac04\uc774 \uc5c6\uc744 \uac83 \uac19\uc544\uc11c \uc5ec\uae30\uc11c \ub9c8\ubb34\ub9ac, \ub098\uc911\uc5d0 \ub2e4\uc2dc \uc190 \ubcfc \uc608\uc815\uc785\ub2c8\ub2e4. \uc2e4\uc81c\ub85c HBase\uac00 \uad81\uae08\ud574\uc11c \ubcf8\uac70\uc9c0 \uc5c5\ubb34\uc5d0 \uc4f0\ub294 \uc0ac\ub78c\uc740 \uc544\ub2d9\ub2c8\ub2e4. \uad00\uc2ec\uc740 \ud56d\uc0c1 \uc788\uc5b4\uc11c \ubcf4\uace0\uc788\uc2b5\ub2c8\ub2e4. \ud2c0\ub9b0 \ubd80\ubd84\uc774 \uc788\ub2e4\uba74 \uadc0\ucc2e\ub354\ub77c\ub3c4 \ub9d0\uc500\ud574\uc8fc\uc2dc\uba74 \ubc18\uc601\ud558\uaca0\uc2b5\ub2c8\ub2e4. \uc870\uae08 \ub0a0\ub9bc\uc774\ub77c\ub3c4 \uc774\ud574\ud574\uc8fc\uc138\uc694. \uc544\uc9c1\ub3c4 \ubcf4\uace0 \uc2f6\uc740 \ubd80\ubd84\uc774 \ub9ce\uc774 \ub0a8\uc544\uc788\ub294\ub370, Block Cache/Bloom Filter/Log Split (distributed)/Recovery/HFile/Perforamcen Tune(Read/Write) \ub4f1\ub4f1. \ucc28\uadfc\ucc28\uadfc \uc815\ub9ac\ud569\ub2c8\ub2e4.</p>\n<p>\ucf54\ub4dc\ubcf4\uba74\uc11c \uc124\uc815 \ubd80\ubd84\uc774 \uc880 \ubcf4\uc774\uae38\ub798 \uc815\ub9ac\ud588\uc2b5\ub2c8\ub2e4. \uc911\uc694\ud574\uc11c \uae30\ub85d\ud55c\uac8c \uc544\ub2c8\uace0 \ubcf4\uc5ec\uc11c \uae30\ub85d\ud55c\uac81\ub2c8\ub2e4. :-)</p>\n<h2>WAL</h2>\n<h3>HLog</h3>\n<h4>hbase.regionserver.hlog.keyclass</h4>\n<p>HLog Writer/Reader\ub97c \uad6c\ud604\ud558\uc9c0 \uc54a\ub294 \uc774\uc0c1 \uc54c \ud544\uc694\uc5c6\ub294 \uc124\uc815\uc785\ub2c8\ub2e4.\u00a0HLogKey \ud074\ub798\uc2a4\ub97c \uc0c1\uc18d \ubc1b\uc544 \uad6c\ud604\ub41c \ud074\ub798\uc2a4\uc5ec\uc57c \uc624\ub958\uac00 \ub098\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 HLogKey \uc785\ub2c8\ub2e4.</p>\n<p>HDFS\ubcf4\ub2e4 \uc548\uc804\ud55c \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \uc788\uc5b4\uc11c \uac70\uae30\uc5d0 \ubcf4\uad00\ud558\uace0 \uc2f6\ub2e4\uba74 \uc544\ub798 Writer/Reader\ub97c \uc0c1\uc18d\ud558\uc5ec \uac1c\ubc1c\ud558\uba74 \ub429\ub2c8\ub2e4.\u00a0hbase.regionserver.hlog.keyclass \ub294 \uadf8 \uacfc\uc815\uc5d0\uc11c \ud544\uc694\ud558\ub2e4 \uc2f6\uc73c\uba74 \ub9cc\ub4e4\uba74 \ub429\ub2c8\ub2e4.</p>\n<h4>hbase.regionserver.hlog.writer.impl</h4>\n<p>HLog.Writer \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc0c1\uc18d\ubc1b\uc740 \ud074\ub798\uc2a4\ub97c \uc9c0\uc815\ud558\uba70, \uae30\ubcf8\uc801\uc73c\ub85c SequenceFileLogWriter \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4. init/close/sync/append/getLength \uba54\uc11c\ub4dc\ub9cc \uad6c\ud604\ud558\uba74 \ub429\ub2c8\ub2e4. \uc774\ub984\uc5d0\uc11c \uc54c \uc218 \uc788\ub4ef\uc774 SequenceFileLogWriter\ub294 SequenceFile\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\u00a0\uad73\uc774 \uc7ac\uad6c\ud604\uc774 \ud544\uc694\ud558\uc9c4 \uc54a\uaca0\uc8e0.</p>\n<h4>hbase.regionserver.hlog.reader.impl</h4>\n<p>HLog.Reader \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc0c1\uc18d\ubc1b\uc740 \ud074\ub798\uc2a4\ub97c \uc9c0\uc815\ud558\uba70, \uae30\ubcf8\uc801\uc73c\ub85c SequenceFileLogReader \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4. init/close/next/seek/getPosition/reset \uba54\uc11c\ub4dc\ub97c \uad6c\ud604\ud558\uba74 \ub429\ub2c8\ub2e4.</p>\n<h4>hbase.regionserver.hlog.enabled</h4>\n<p>org.apache.hadoop.hbase.regionserver.wal.HLog \uc5d0\uc11c \uc0ac\uc6a9\ud558\uba70, HLog \ud65c\uc131\uc5ec\ubd80\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.</p>\n<h4>hbase.regionserver.hlog.replication</h4>\n<p>HLog\ub97c \ubcf5\uc81c\uc218\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 FileSystem.getDefaultReplication() \uc785\ub2c8\ub2e4.</p>\n<h4>hbase.regionserver.hlog.blocksize</h4>\n<p>hbase.regionserver.logroll.multiplier\uc640 \ud568\uaed8 \uacc4\uc0b0\ud560 \ub54c \uc4f0\ub294 \uae30\uc900\uce58\uc774\uc790, HLog \ud30c\uc77c\uc758 blocksize \uc785\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 FileSystem.getDefaultBlockSize() \uc785\ub2c8\ub2e4.</p>\n<h4>hbase.regionserver.logroll.multiplier</h4>\n<p>sync\ub420 \ub54c log \ud06c\uae30\uac00 blocksize * multiplier \ubcf4\ub2e4 \ud070 \uac12\uc778\uc9c0 \uac80\uc0ac\ud558\uace0 \ub118\uc5c8\uc744 \uacbd\uc6b0 HLog.requestLogRoll \uba54\uc11c\ub4dc\uac00 \ud638\ucd9c\ub429\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 0.95\uc785\ub2c8\ub2e4. \ub0b4\ubd80\uc801\uc73c\ub85c\ub294\u00a0WALActionsListener \uc5d0\uac8c \uc774\ubca4\ud2b8\ub97c \uc804\ub2ec\ud569\ub2c8\ub2e4. \ub300\uc0c1 \ub9ac\uc2a4\ub108\ub85c\ub294\u00a0LogRoller\uc640\u00a0Replication \uc774 \uc788\uc2b5\ub2c8\ub2e4. HLog\ub97c \uc0dd\uc131\ud560 \ub54c Listeners\ub97c \ub4f1\ub85d\ud558\uba70, \uc0dd\uc131\uc740 HRegionServer\uc5d0\uc11c \ud569\ub2c8\ub2e4. (hbase.hregion.memstore.block.multiplier \uc640\ub294 \ub2e4\ub978 \ud56d\ubaa9\uc785\ub2c8\ub2e4.)</p>\n<h3>\uad00\ub828 \uc774\uc288</h3>\n<p>HLog \ucf54\ub4dc\ub97c \ubcf4\ub2e4\uac00 \ud788\uc2a4\ud1a0\ub9ac\uac00 \uad81\uae08\ud558\uc5ec \ucc3e\uc544\ubcf4\ub294\ub370, \uc544\ub798 \uc774\uc288\ub97c \ucc3e\uc544\ubd24\uc2b5\ub2c8\ub2e4.</p>\n<h5><a href=\"https://issues.apache.org/jira/browse/HBASE-2312\">https://issues.apache.org/jira/browse/HBASE-2312</a></h5>\n<p>\uc774\ubbf8 \uc218\uc815\ub41c\uac70\uace0, \uc790\uc8fc \ub098\uc624\ub294 \ucf00\uc774\uc2a4\ub294 \uc544\ub2c8\ub77c\uace0 \ud558\ub294\ub370, (1) RS1\uc774 HLog \ub864\ub9c1\ud558\ub824\ub2e4\uac00 (2) GC\ub85c \uba48\ucd94\uace0 (3) HMaster\uac00 log splitting\uc744 \ub418\uace0 (4) RS1\uc774 \ub2e4\uc2dc \uae68\uc5b4\ub098\uba74\uc11c \uc218\uc815\uc0ac\ud56d\uc740 \ucd94\uac00\ub420 \ub54c</p>\n<p>\uadf8\uac8c \uc720\uc2e4\ub420 \uc218 \uc788\ub2e4\ub294 \ub9d0\uc778 \ub4ef. \uadf8\ub798\uc11c Cloudera \ube14\ub85c\uadf8 \ud3ec\uc2a4\ud2b8(HBase Log Splitting) \uc5d0\uc11c \uc5b8\uae09\ud588\ub4ef\uc774 -splitting suffix\uac00 \ubd99\uc5ec rename\ub418\ub294\uac8c \uc774 \ub54c \ucd94\uac00\ub41c \uac83 \uac19\uace0, SequenceFile.createWriter\uc5d0 createParent \ub77c\ub294 \uae30\ub2a5\uc744 \uba3c\uc800 \ucd94\uac00\uc2dc\ud0a8 \ud6c4 (HDFS-617,\u00a0HADOOP-6840,\u00a0HADOOP-6886), reflection\uc744 \uc774\uc6a9\ud55c createWriter\ub97c \uc0dd\uc131\ud558\uc5ec \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \uc774 \ubd80\ubd84\uc740 \ubb54\uac00 \ub2e4\uc2dc \uc4f8 \ud544\uc694\uac00\u2026 TBD</p>\n<h5><a href=\"https://issues.apache.org/jira/browse/HBASE-2467\">https://issues.apache.org/jira/browse/HBASE-2467</a></h5>\n<p>\uc544\uc8fc \uc608\uc804 \uc774\uc288\uc774\uace0 \uad00\ub828 \uc774\uc288\ub294 HDFS-895\uac00 \uc788\uc2b5\ub2c8\ub2e4. sync/flush/write \ub4f1\uc744 \ud560 \ub54c synchronized\ud558\uac8c \uc218\ud589\ud588\ub294\ub370 flush/sync \ub4f1\uc5d0\uc11c \ubcd1\ub82c \uc218\ud589\ud560 \uc218 \uc788\ub294 \ubd80\ubd84\uc744 \ubd84\ub9ac\ud558\uc5ec write \uc131\ub2a5\uc744 \uac1c\uc120\ud55c \uae30\ub2a5\uc785\ub2c8\ub2e4.</p>\n<h5><a href=\"https://issues.apache.org/jira/browse/HBASE-2283\">https://issues.apache.org/jira/browse/HBASE-2283</a></h5>\n<p>WAL \uad00\ub828 \ucf54\ub4dc \uc911 WALEdit \ud074\ub798\uc2a4\ub97c \ubd24\ub294\ub370, HBASE-2283 \uc774\uc288\uac00 \ud574\uacb0\ub418\uae30\uc804 \uacfc\uac70\u00a0\ubc84\uc804\uc5d0\uc11c\ub294 WALEdit\uac00 \uc544\ub2cc KeyValue \uc600\ub124\uc694. row level atomicity \ud2b8\ub79c\uc7ad\uc158\uc758 \uacbd\uc6b0, \ud558\ub098\uc758 \ud2b8\ub79c\uc7ad\uc158\uc774\uc9c0\ub9cc KeyValue\ub85c \uc800\uc7a5\ud558\ub2e4\uac00 \uc7a5\uc560\uac00 \ub09c \uacbd\uc6b0 \ubcf5\uad6c\ub97c \ubabb\ud558\ub294 \uacbd\uc6b0\uac00 \uc0dd\uaca8\uc11c \ubcc0\uacbd\ub418\uc5c8\ub124\uc694.</p>\n<h5><a href=\"https://issues.apache.org/jira/browse/HBASE-4387\">https://issues.apache.org/jira/browse/HBASE-4387</a></h5>\n<p>HLog Writer\uac00 \uc774\ubbf8 close\ub41c \uacbd\uc6b0\u00a0DFSOutputStream \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4. updateLock\uc744 \uac78\uc9c0 \uc54a\uace0 \ud558\uae30\ub54c\ubb38\uc5d0 rolling \ub420 \ub54c close\ub418\ub294 \uacbd\uc6b0\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub798\uc11c \uc218\uc815\ub41c \uc774\uc288\uc785\ub2c8\ub2e4. \ud574\uacb0\uc740 IOException\uc774 \ubc1c\uc0dd\ud558\uba74 \ub2e4\uc2dc \ud558\ub294\uac70\uc8e0. \uc774\ub54c \ucf54\ub4dc\ub294 \uc7ac\ubc0c\ub294\uac74 \uc2e4\ud328\uc5ec\ubd80\ub791 \uc0c1\uad00\uc5c6\uc774 updateLock\uc744 \uac78\uace0 \uc131\uacf5\uc5ec\ubd80\ub97c \uac80\uc0ac\ud568. (\uc9c0\uae08\uc740 catch\ubb38 \uc548\uc5d0 \uc874\uc7ac)</p>\n<h5><a href=\"https://issues.apache.org/jira/browse/HBASE-5623\">https://issues.apache.org/jira/browse/HBASE-5623</a></h5>\n<p>HBASE-2312 \uc774\uc288\uc5d0\uc11c writer\ub97c close \ud6c4 writer &#61; null \ubc14\uafb8\uba74\uc11c \uc0dd\uae34 \uc77c. \uc9c0\uae08\uc758 tempWriter\ub97c \uc368\uc11c \ud558\ub294 \ucf54\ub4dc\uac00 \ub41c \uc774\uc720.</p>\n<h3>HLogSplitter</h3>\n<h4>hbase.hlog.splitter.impl</h4>\n<p>HLogSplitter\ub97c \ubcc4\ub3c4\ub85c \uc7ac\uad6c\ud604\ud560 \ud544\uc694\uac00 \uc788\uc744 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. HLogSplitter\ub97c \uc0c1\uc18d\ubc1b\uace0, \uc0dd\uc131\uc790\ub85c (conf: Configuration, rootDir: Path, srcDir: Path, oldLogDir: Path, fs: FileSystem) \uc744 \ubc1b\uc744 \uc218 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.</p>\n<h4>hbase.regionserver.hlog.splitlog.buffersize</h4>\n<p>HLogSplitter\uac00 \uc0ac\uc6a9\ud558\ub294 \ucd5c\ub300 \ud799 \ud06c\uae30\ub85c \uae30\ubcf8\uac12\uc740 128MiB \uc785\ub2c8\ub2e4.</p>\n<h4>hbase.hlog.split.skip.errors</h4>\n<p>HLogSplitter\uac00 \ub3d9\uc791\ud558\ub2e4\uac00 \uc7a5\uc560\uac00 \ub0a0 \uacbd\uc6b0 \ubb34\uc2dc\uc5ec\ubd80\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4. \uc608\uc678\uc801\uc73c\ub85c EOFException\uc758 \uacbd\uc6b0\ub294 RS\uac00 \uc7a5\uc560\uc77c \uac00\ub2a5\uc131\uc774 \uc788\uc5b4\uc11c \uac12\uacfc \uc0c1\uad00\uc5c6\uc774 \ub4a4\uc5d0 \ub85c\uadf8\ub294 \ubb34\uc2dc\ub418\uace0(info \ub85c\uadf8 \u201cEOF from hlog &lt;path&gt; continuing\u201d), parse \uc2e4\ud328\uc778 ParseException, ChecksumException \ub3c4 \ubb34\uc2dc(warn \ub85c\uadf8 \u201cParse exception &lt;e&gt; from hlog &lt;path&gt; continuing\u201d)\ub429\ub2c8\ub2e4. \uadf8 \uc678 \uc5d0\ub7ec\ub294 throw\ud558\uace0, skip \ud588\uc744 \uacbd\uc6b0\uc5d4\u00a0CorruptedLogFileException \uc744 \ubc1c\uc0dd\uc2dc\ud0b5\ub2c8\ub2e4. CorruptedLogFileException\uc758 \uacbd\uc6b0\ub294 corruptDir(hbase.regionserver.hlog.splitlog.corrupt.dir)\ub85c \uc774\ub3d9, \ucc98\ub9ac\ub97c \uc81c\ub300\ub85c\ud55c \uac83\uc740 oldLogDir(\ubcc0\uacbd \ubd88\uac00)\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4. \uc544\uc9c1\uc740 split \ucabd\uc740 \uc798 \ubab0\ub77c\uc11c, \uc790\uc138\ud788\ub294 \ub098\uc911\uc5d0 \ub610 \uc870\uc0ac\ud558\ub824\uace0 \ud558\uace0\u2026 TBD</p>\n<p>\uc0ac\uc6a9\ud558\ub294 \uacf3\uc740</p>\n<p>HMaster\uac00 RS shutdown \uac10\uc9c0\ud560 \ub54c \ucc98\ub9ac\ud558\ub294 \ud578\ub4e4\ub7ec\uc778 ServerShutdownHandler\uc640 SplitLogWorker, HMaster \uc2dc\uc791 \ud6c4\u00a0MasterFileSystem.splitLogAfterStartup, HLog.main \ub4f1\uc774 \uc788\ub2e4.</p>\n<h3>\uad00\ub828 \uc774\uc288</h3>\n<h5><a href=\"https://issues.apache.org/jira/browse/HBASE-3323\">https://issues.apache.org/jira/browse/HBASE-3323</a></h5>\n<p>hbase.regionserver.hlog.splitlog.buffersize \ud56d\ubaa9\uacfc \uad00\ub828\ub41c \ub0b4\uc6a9\uc778 \ub4ef \ubcf4\uc774\uba70, HMaster\uc5d0\uc11c OOME (Out of memory exception)\uc73c\ub85c \uc778\ud55c \uc218\uc815\uc785\ub2c8\ub2e4.</p>\n<h4><a href=\"https://issues.apache.org/jira/browse/HBASE-1364\">https://issues.apache.org/jira/browse/HBASE-1364</a></h4>\n<p>\uad6c\uae00 \ube45\ud14c\uc774\ube14\uc5d0\uc11c\ub294 \ubd84\uc0b0\ub418\uc5b4 split\ub418\ub294 \ubc18\uba74\uc5d0 HBase\ub294 \uacfc\uac70\uc5d0 \uadf8\ub7ec\uc9c0 \ubabb\ud588\uace0, \uc774\ub97c \uad6c\ud604\ud55c \uc774\uc288\uc785\ub2c8\ub2e4. SplitLogManager/SplitLogWorker/ZKSplitLog \ub4f1\uc774 \uc774 \ub54c \uc0dd\uae30\uace0, SplitLogWorker\uc758 \uacbd\uc6b0\ub294 HRegionServer\uc5d0\uc11c \ud558\ub098\uc758 Thread\ub85c \ub3d9\uc791\ud558\uace0\u00a0SplitLogWorker-[NAME] \uc774\ub984\uc73c\ub85c \ub3d9\uc791\ud569\ub2c8\ub2e4. \uc774\uac74 \ub098\uc911\uc5d0 \ub530\ub85c \ubcf4\uace0 \uc774\ubc88\uc5d4 \ub118\uc5b4\uac11\ub2c8\ub2e4.</p>\n<h3>LogRoller</h3>\n<p>org.apache.hadoop.hbase.regionserver.LogRoller \uc5d0\uc11c \ucc98\ub9ac\ud558\uba70, HRegionServer\uc5d0\uc11c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p>\n<p>\uc8fc\ub85c \uc2a4\ub808\ub4dc\uc758 \uc0c1\ud0dc\ub294 TIMED_WAIT \ud615\ud0dc\ub85c \ub3d9\uc791\ud569\ub2c8\ub2e4. (hbase.server.thread.wakefrequency, LogRoller\uc5d0\uc11c\ub294 10\ucd08\uac00 \uae30\ubcf8\uac12) \uc774 \uc2a4\ub808\ub4dc\uac00 \uc81c \uc5ed\ud560\uc744 \uc218\ud589\ud558\ub294 \uac83\uc740 \uc8fc\uae30\uc801\uc73c\ub85c \uc2e4\ud589\ub418\uac70\ub098 \uc9c0\uc815\ud55c blocksize\uc758 \ube44\uc728\ubcf4\ub2e4 \ucd08\uacfc\ud588\uc744 \ub54c \uc218\ud589\ub429\ub2c8\ub2e4. \ud6c4\uc790\ub294 \uc704\uc5d0\uc11c \uba3c\uc800 \uc5b8\uae09\ud588\ub358 \ubc29\ubc95\uc774\uba70 \ub0b4\ubd80 \uad6c\ud604\uc740\u00a0HLog\uc5d0\uc11c \ube44\ub3d9\uae30\uc801\uc73c\ub85c LogRoller\uc5d0 \uc694\uccad\ud569\ub2c8\ub2e4.</p>\n<p>LogRoller\ub294\u00a0FlushRequester \ub85c \ub4f1\ub85d\ub41c\u00a0MemStoreFlusher\uc5d0\uac8c requestFlush \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud569\ub2c8\ub2e4.</p>\n<h4>hbase.regionserver.logroll.period</h4>\n<p>\uc5b4\ub5a4 \uc8fc\uae30\ub85c \ub85c\uadf8\ub97c rolling\ud560\uc9c0 ms \ub2e8\uc704\ub85c \uae30\ub85d\ud569\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 3600000 ms\ub85c 1\uc2dc\uac04\uc785\ub2c8\ub2e4. \uc815\ud655\ud788 \uc9c0\uc815\ud55c \uc2dc\uac04\uc774 \uc544\ub2c8\ub77c \uc4f0\ub808\ub4dc\uac00 \uae68\uc5b4\ub098\ub294 \uc8fc\uae30\uc778\u00a0hbase.server.thread.wakefrequency \ub85c \uacb0\uc815\ub429\ub2c8\ub2e4. \ub9c8\ucc2c\uac00\uc9c0\ub85c HLog\uc5d0\uc11c \uc694\uccad\ud55c \uac83\ub3c4 \uc774 \uc8fc\uae30\uc5d0 \ub9de\uac8c \uae68\uc5b4\ub098\uace0 \ub098\uc11c \uc218\ud589\ub429\ub2c8\ub2e4. (\uacb9\ucce4\uc744 \ub550 \ud558\ub098\ub9cc \uc218\ud589\ub418\uba74 \ub429\ub2c8\ub2e4. \uadf8\ub798\uc11c HLog\uc5d0\uc11c \uc694\uccad\ud55c\uac83\uc774 \uc218\ud589\ub418\uace0 \uc8fc\uae30\ub294 \ubb34\uc2dc\ub418\uace0 \ub2e4\uc74c \uc8fc\uae30\uc5d0 \uc218\ud589\ub429\ub2c8\ub2e4.)</p>\n<h3>MemStoreFlusher</h3>\n<h6>\uc81c\ud55c\ub41c \uba54\ubaa8\ub9ac\uc5d0\uc11c Flush\ud560 \ub300\uc0c1\uc744 \ucc3e\ub294 \uc54c\uace0\ub9ac\uc998(\ubb38\uc81c\ud574\uacb0 \ubc29\ubc95)</h6>\n<p>upperLimit \ub610\ub294 lowerLimit\ub97c \ucd08\uacfc\ud55c \uacbd\uc6b0\u00a0getBiggestMemstoreRegion \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 \uac00\uc7a5 \ud070 \uba64\uc2a4\ud1a0\uc5b4\ub97c \ucc3e\uace0 \uadf8 \uacfc\uc815\uc5d0\uc11c\ub3c4 \ucef4\ud329\uc158\uc744 \uc904\uc774\uae30\uc704\ud55c \ub178\ub825\uc744 \ud569\ub2c8\ub2e4. \uac04\ub2e8\ud558\uac8c \uc21c\uc11c\ub97c \ub098\uc5f4\ud558\uba74 (1) MemStore \ud06c\uae30 \uc21c\uc73c\ub85c \uc815\ub82c \ud6c4 (2) StoreFile\uc774\u00a0hbase.hstore.compactionThreshold \ubcf4\ub2e4 \ud070 \uc560\ub4e4\uc740 \uc81c\uc678\ud558\uace0 \uac00\uc7a5 \ud070 MemStore\ub97c \ucc3e\uace0 (3) StoreFile \uc218\uc640\ub294 \uc0c1\uad00\uc5c6\uc774 \uac00\uc7a5 \ud070 MemStore\ub97c \ucc3e\uace0 (4) StoreFile\uc774 \uc801\uc740 \uac83\uc5d0 2\ubc30\uc758 \uac00\uc911\uce58\ub97c \uc918\uc11c flush\ud560 MemStore\ub97c \ucc3e\uc2b5\ub2c8\ub2e4.</p>\n<p>\uc5ec\uae30\uc11c \ucc38\uace0\ud560 \ub9cc\ud55c \uc9c0\ud45c\ub97c \ucf54\ub4dc\uc0c1\uc73c\ub85c \ubcf4\ub2c8 updatesBlockedSecondsHighWater \ub77c\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub294 upperLimit \ucd08\uacfc\ud574\uc11c \ubc1c\uc0dd\ud55c \ube14\ub7ed\ud0b9\ud55c \uc2dc\uac04\uc744 \ub204\uc801\ud55c \uce74\uc6b4\ud130 \uba54\ud2b8\ub9ad\uc785\ub2c8\ub2e4. \uc2ec\ud558\ub2e4\uba74 \uc870\uc728\uc774 \ud544\uc694\ud560\ud150\ub370 \uc81c\uac00 \uc368\ubcf8\uc801\uc774 \uc5c6\uc73c\ub2c8 \ubb50\ub77c \ub9d0\ud560\uac8c \uc5c6\ub124\uc694. (\uc804 \uacbd\ud5d8\uc774 \uc5c6\uc5b4\uc11c \u314b\u314b)</p>\n<h4>hbase.regionserver.global.memstore.upperLimit</h4>\n<p>\uae30\ubcf8\uac12\uc740 0.4\uc774\uba70, \uac12\uc758 \ubc94\uc704\ub294 (0.1, 0.9) \uc774\uace0 \ubc94\uc704\ub97c \ubc97\uc5b4\ub09c \uacbd\uc6b0 0.4\ub85c \uc124\uc815\ub429\ub2c8\ub2e4.\u00a0\ud55c RegionServer\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 MemStore\uc758 Heap \ud06c\uae30\ub85c \ubcf4\uba74 \ub41c\ub2e4. \uc774 \uc218\uce58\ub97c \ucd08\uacfc\ud588\uc744 \uacbd\uc6b0 \ube14\ub7ed\ud0b9\ub418\uace0 MemStore\ub294 \uac15\uc81c\ub85c flush \ub429\ub2c8\ub2e4. put/delete \ub4f1\uacfc \uac19\uc740 \ubcc0\uacbd\uc744 \ud558\ub294 \ucee4\ub9e8\ub4dc\uc5d0\uc11c\u00a0reclaimMemStoreMemory \uba54\uc11c\ub4dc\uac00 \ud638\ucd9c\ub429\ub2c8\ub2e4.</p>\n<h4>hbase.regionserver.global.memstore.lowerLimit</h4>\n<p>\uae30\ubcf8\uac12\uc740 0.35\uc774\uba70, \uac12\uc758 \ubc94\uc704\ub294 (0.1, 0.9) \uc774\uace0 \ubc94\uc704\ub97c \ubc97\uc5b4\ub09c \uacbd\uc6b0 0.35\ub85c \uc124\uc815\ub429\ub2c8\ub2e4. \ub610\ud55c upperLimit \ubcf4\ub2e4 \ud074 \ub54c\ub294 upperLimit\uc640 \ub3d9\uc77c\ud55c \uac12\uc73c\ub85c \uc124\uc815\ub429\ub2c8\ub2e4. upperLimit\uc640 \ub2e4\ub978 \uc810\uc740 \ube14\ub7ed\ud0b9\uc774 \ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. lowerLimit\uc744 \ucd08\uacfc\ud55c \uacbd\uc6b0\ub294 \ube44\ub3d9\uae30\uc801\uc73c\ub85c Thread\ub97c \uae68\uc6c1\ub2c8\ub2e4. (\uc74c. notify/notifyAll \uc774\ub098 signal/signalAll \ub4f1\uc744 \uc774\uc6a9\ud574 \uae68\uc6b4\ub2e4\ub294 \ub9d0\uc740 \uc544\ub2d9\ub2c8\ub2e4. \uadf8\ub807\uac8c \uc624\ud574\ub294 \ub9c8\uc138\uc694.)</p>\n<h4>hbase.regionserver.maxlogs</h4>\n<p>HLog\ud074\ub798\uc2a4\uc5d0\uc11c \uc4f0\uc9c0\ub9cc \uc601\ud5a5\uc744 \ubbf8\uce58\ub294 \ud074\ub798\uc2a4\ub294 MemStoreFlusher\ub85c \ud310\ub2e8\ub429\ub2c8\ub2e4. HLog.rollWriter -&gt; HLog.cleanOldLogs \uc5d0\uc11c \ubc18\ud658\ud558\ub294\ub370, \uc2e4\uc81c\ub85c \ud638\ucd9c\ud558\ub294 \uc560\ub4e4\uc740 \ub9ce\uc9c0\ub9cc \uc4f0\ub294 \uc560\ub294 MemStoreFlusher \ud558\ub098 \ubfd0\uc778 \uac83 \uac19\uc2b5\ub2c8\ub2e4.</p>\n<p>TBD</p>\n<h4>hbase.hstore.compactionThreshold</h4>\n<p>TBD</p>\n<h4>hbase.hstore.blockingStoreFiles</h4>\n<p>\uae30\ubcf8\uac12\uc740 7\uc774\uba70, -1\uc778 \uacbd\uc6b0\ub294 1 &#43;\u00a0hbase.hstore.compactionThreshold \uc218 \uc785\ub2c8\ub2e4. TBD</p>\n<h4>hbase.hstore.blockingWaitTime</h4>\n<p>\uae30\ubcf8\uac12\uc740 90000.\u00a0TBD</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/hbase/\">hbase</a> "}, "published": 1364218757, "categories": []}, {"updated": 1364045132, "alternate": [{"href": "http://blog.geekple.com/2013/03/23/hbase-related-posts/", "type": "text/html"}], "title": "HBase \u2013 Related posts", "author": "Daegeun Kim", "content": {"content": "<ul>\n<li><a href=\"http://blog.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/\">Apache HBase I/O \u2013 HFile</a>\u00a0by\u00a0Matteo Bertozzi <a href=\"http://charsyam.wordpress.com/2012/07/01/%eb%b0%9c-%eb%b2%88%ec%97%ad-hbase-io-hfile/\">\ubc88\uc5ed\uae00</a></li>\n<li><a href=\"http://blog.cloudera.com/blog/2012/06/hbase-write-path/\">Apache HBase Write Path</a> by Jimmy Xiang\u00a0<a href=\"http://charsyam.wordpress.com/2012/06/20/%eb%b0%9c-%eb%b2%88%ec%97%ad-hbase-write-path/\">\ubc88\uc5ed\uae00</a></li>\n<li><a href=\"http://blog.cloudera.com/blog/2012/07/hbase-log-splitting/\">Apache HBase Log Splitting</a>\u00a0by\u00a0Jimmy Xiang\u00a0<a href=\"http://charsyam.wordpress.com/2012/08/11/%eb%b0%9c-%eb%b2%88%ec%97%ad-hbase-log-splitting/\">\ubc88\uc5ed\uae00</a></li>\n<li><a href=\"http://blog.cloudera.com/blog/2012/07/hbase-replication-overview-2/\">Apache HBase Replication Overview</a> by\u00a0Himanshu Vashishtha <a href=\"http://charsyam.wordpress.com/2012/08/05/%eb%b0%9c-%eb%b2%88%ec%97%ad-hbase-replication-overview/\">\ubc88\uc5ed\uae00</a></li>\n<li><a href=\"http://www.cloudera.com/blog/2012/08/hbase-replication-operational-overview/\">Apache HBase Replication \u2013 Operational Overview</a>\u00a0by\u00a0Himanshu Vashishtha\u00a0<a href=\"http://charsyam.wordpress.com/2012/08/22/%eb%b0%9c-%eb%b2%88%ec%97%ad-hbase-replication-operational-overview/\">\ubc88\uc5ed\uae00</a></li>\n</ul>\n<p>\ubc88\uc5ed\ub41c \uc88b\uc740 \uae00\uc774 \uc788\ub124\uc694. \uc9c0\uae08\uae4c\uc9c0 \uc37c\ub358 \ub0b4\uc6a9\uc774 \uad6c\ub9ac\uc9c0\ub9cc Apache HBase Write Path\uc5d0 \uae30\ub85d\ub41c \ub0b4\uc6a9\ucc98\ub7fc \ubb54\uac00 \uc801\uc5b4\ub098\uac00\ub824\uace0 \ud588\uc5b4\uc694. \uc5b4\uca0c\ub4e0 \ub0b4 \uacf5\ubd80\ucc28\uc6d0\uc5d0\uc11c \ud558\ub294\uac70\ub2c8,,, \uc800\uc758 \uae00\ubcf4\ub2e4\ub294 \ubc88\uc5ed\uae00\uc774\ub098 \uc6d0\uae00 \uc77d\uc73c\uc138\uc694.</p>\n<p>\uc774 \uc774\uc678\uc5d0\ub3c4 Cloudera\uc5d4 \uc88b\uc740 \uae00\uc774 \ub9ce\uc774 \uc788\ub294 \ub4ef \ud558\ub2c8 \ud558\ub098 \ud558\ub098 \ubd10\uc57c\uaca0\uc5b4\uc694. :-)</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/hbase/\">hbase</a> "}, "published": 1364045132, "categories": []}, {"updated": 1363945503, "alternate": [{"href": "http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-3/", "type": "text/html"}], "title": "HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 3", "author": "Daegeun Kim", "content": {"content": "<ul>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase/\">HBase \u2013 \uc2dc\uc791\ud558\uae30\uc5d0 \uc55e\uc11c</a></li>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-1/\">HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 1</a></li>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-2/\">HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 2</a></li>\n</ul>\n<p>\uc81c\uac00 \uc18c\uc2a4\ubcf8\uc9c0 \uc5bc\ub9c8\uc548\ub418\uc11c \ud2c0\ub9b0 \ub0b4\uc6a9\uc774 \uc788\uc744 \uc218 \uc788\uc73c\ub2c8, \uc798\ubabb\ub41c \ub0b4\uc6a9\uc774 \uc788\ub2e4\uba74 \uad6c\uacbd\ub9cc \ud558\uc9c0\ub9c8\uc2dc\uace0 \uc9c0\uc801\ud574\uc8fc\uc2dc\uba74 \uac10\uc0ac\ud558\uaca0\uc2b5\ub2c8\ub2e4. :-)</p>\n<p>\uc9c0\uae08\uae4c\uc9c0 \uc4f0\uae30\uc758 \uacb0\ub860\uc740 HDFS\uc640 \uac19\uc740 \uc5b4\ucc0c\ubcf4\uba74 Immutable \ud560 \uc218 \uc788\ub294\ub370(\uc624\ud574\uc758 \uc18c\uc9c0\uac00 \uc788\uae34\ud55c\ub370, \uc774\ubbf8 \uc4f0\uc5ec\uc9c4 \uac83\uc740 \ubcc0\uacbd\uc774 \ubd88\uac00\ub2a5\ud558\ubbc0\ub85c \uc774\ub807\uac8c \uac00\uc815\ud588\uc2b5\ub2c8\ub2e4.), \uc774\ub97c \uc5b4\ub5bb\uac8c rowkey\uc5d0\ud574\ub2f9\ud558\ub294 (\uceec\ub7fc)\uac12\uc744 \uc4f0\uace0 \uc77d\uc744 \uc218 \uc788\ub294\uc9c0\ub294 MemStore\ub77c \ubd88\ub9ac\ub294 \ub118\uc744 \uc774\uc6a9\ud574 \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uacb0\uad6d\uc740 \uae30\uc874\uacfc \ub2e4\ub978 rowkey\uc5d0\ud574\ub2f9\ud558\ub294 \ubcc0\uacbd\uc0ac\ud56d(modification)\uc740 MemStore\uc5d0 \uc788\uace0 \uc774\ub97c \uc870\ud68c\uc5d0\uc11c \uc77d\ub294 \ud615\ud0dc\uc785\ub2c8\ub2e4.</p>\n<p>MemStore\uc5d0\uc11c StoreFile (HFile)\ub85c snapshot\uc744 \ub728\ub294 \uc774\uc720\ub294</p>\n<ul>\n<li>\uba54\ubaa8\ub9ac\uc758 \ud55c\uacc4</li>\n<li>\uc5b4\ub514\uc11c \uc5bc\ud54f \ubcf8 \uac83 \uac19\uc740\ub370, \ub108\ubb34 \uc784\uacc4\uce58\ub97c \ub192\uac8c \uc7a1\uc73c\uba74 \ubcf5\uad6c\ud558\ub294\ub370 \uc2dc\uac04\uc774 \uc18c\ubaa8\ub41c\ub2e4\uace0 \ud558\ub294\ub370 \uce21\uc815\ud574\ubcf4\uc9c4 \uc54a\uc558\uc74c.</li>\n</ul>\n<p>batch\uc640 mutateRow \ucc28\uc774</p>\n<ul>\n<li>batch\uc758 \uacbd\uc6b0\ub294 lock \ud68d\ub4dd\ud558\uc9c0 \ubabb\ud558\uba74 \ub4a4\uc5d0 \ubcc0\uacbd \uc694\uccad\uc740 \ub2e4\uc74c \ub2e8\uacc4\uc5d0\uc11c \ub2e4\uc2dc \ubc18\ubcf5\ub418\uc11c \ucc98\ub9ac</li>\n<li>mutateRow\uc758 \uacbd\uc6b0\ub294 lock \ud68d\ub4dd\ud560 \ub54c \uae4c\uc9c0 \uc9c0\uc815\ud55c \uc2dc\uac04\ub9cc\ud07c \uae30\ub2e4\ub9b0\ub2e4. (hbase.rowlock.wait.duration, default : 30 secs)</li>\n</ul>\n<h4>HBase Metrics \uc815\ub9ac</h4>\n<p>\uac11\uc790\uae30 \ub4e0 \uc0dd\uac01\uc740 \uc65c \ucf54\ub4dc\ubcf4\uba74\uc11c metric \uc815\ub9ac\ud558\ub294\uac74 \uae4c\uba39\uc5c8\ub098 \uc2f6\ub2e4. \uc77c\ub2e8 \ud558\ub098\ub9cc \uc801\uc2b5\ub2c8\ub2e4.</p>\n<ul>\n<li>writeRequestsCount : \uc4f0\uae30 \uc694\uccad \uac74\uc218</li>\n</ul>\n<h4>\uc77d\uae30</h4>\n<p>\uc4f0\uae30\ub294 \ub098\uc911\uc73c\ub85c \ubbf8\ub8e8\uace0, \uc774\uc81c \uc77d\uae30\uc5d0\ub300\ud55c \ud3ec\uc2a4\ud2b8\ub97c \uc4f0\uae30\uc5d0 \uc55e\uc11c \uc57d\uac04 \uc815\ub9ac.</p>\n<ul>\n<li>get</li>\n<li>batch</li>\n<li>getScanner</li>\n</ul>\n<p>\ub4f1\uc758 \uba54\uc11c\ub4dc\ub97c \uc774\uc6a9\ud55c \uc870\ud68c\ub97c \uc774\uc6a9\ud558\ub294 \uac83 \uac19\uc2b5\ub2c8\ub2e4. \ub300\ucda9 \ubd24\uc744 \ub54c \ub300\ubd80\ubd84\uc758 get/batch/getScanner \ud1b5\ud55c \uba54\uc11c\ub4dc\ub4e0 \ubaa8\ub450 \ub0b4\ubd80\uc801\uc73c\ub85c\ub294 Scan \uc744 \ud1b5\ud574\uc11c \uc9c4\ud589\ub429\ub2c8\ub2e4. (get\uc740 start/end key\uac00 \uac19\uc740 scan)</p>\n<p>\uc870\uae08 \uace0\ubbfc\ud574\ubcf4\uba74 Scan\uc758 \uacbd\uc6b0\uc5d4 \uace0\ubbfc\ud560 \uac83\uc774 \ub9ce\ub2e4\ub294 \uac83\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc608\ub97c\ub4e4\uba74 HBase\uc5d0\uc11c\ub294 CF\ub2f9 \ud558\ub098\uc758 MemStore\ub97c \uac00\uc9c0\uace0 \uc788\uace0 \ub610 \ub9ce\uc740 \uc218\uc758 MemStore \uc2a4\ub0c5\uc0f7\uc774 \uc788\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>\n<p>StoreFile(HFile)\uc740 \uadf8 \ub54c \uadf8 \ub54c\uc758 MemStore\uc758 snapshot\uc774\ub77c, rowkey\uc5d0 \ud574\ub2f9\ud558\ub294 \uceec\ub7fc\ub4e4\uc774 \uc5ec\ub7ec StoreFile\uc5d0 \uc11e\uc5ec \uc788\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ubb3c\ub860 MemStore\uac00 \uc6b0\uc120\uc774 \ub418\uaca0\uace0, \uadf8 \ub2e4\uc74c\uc740 \ucd5c\uadfc\uc758 snapshot\uc774 \uc6b0\uc120\uc21c\uc704\ub294 \ub192\uaca0\uc8e0. (\uc544\uc9c1\uc740 \uc81c\ub300\ub85c \ucf54\ub4dc\ub97c \uc548\ubd10\uc11c \ucd94\uce21\uc785\ub2c8\ub2e4.)</p>\n<p>\uadf8\ub798\uc11c \uc2a4\uce94\ud574\uc57c\ud560 \ub300\uc0c1\uc774 \uc904\uc5b4\ub4e4\ub3c4\ub85d \ud574\uc57c \uc18d\ub3c4\uc640 \ub9ac\uc18c\uc2a4 \ud65c\uc6a9\uba74\uc5d0\uc11c \uc720\ub9ac\ud558\ub2e4\uace0 \ubcfc \uc218 \uc788\uaca0\uc8e0. \uc774\uac74 \ub2e4\uc74c\uc5d0 \ud3ec\uc2a4\ud2b8\ud560 \ub54c \uc815\ub9ac\ub97c \ud560 \uc0dd\uac01\uc785\ub2c8\ub2e4.</p>\n<p>\uc544, \uc624\ub298\uc740 \uc911\uc694\ud55c \uc57d\uc18d\uc774 \uc788\uc5b4\uc11c \uc774\ucbe4\uc5d0\uc11c \ub9c8\ubb34\ub9ac. \ub2e4\uc74c\uc5d0 \uc815\ub9ac\ud560 \ub300\uc0c1\uc740 Scanner/Reader/Writer/etc.</p>\n<ul>\n<li>RegionScanner</li>\n<li>KeyValueScanner</li>\n<li>NonLazyKeyValueScanner</li>\n<li>MemStoreScanner</li>\n<li>KeyValueHeap</li>\n<li>StoreFileScannner</li>\n<li>StoreScanner / HFileScanner</li>\n</ul>\n<p>\ub4f1\ub4f1\ub4f1. BlockCache, BloomFilter \ub4f1\uc774 \uc774\ub860\uc0c1\uc73c\ub860 \uc54c\uc9c0\ub9cc HBase\uc5d0\uc11c \uc5b4\ub5bb\uac8c \ud65c\uc6a9\ub418\ub294\uc9c0\uc640 HFile v1, v2\uc758 \ucc28\uc774 \ubc0f \ub370\uc774\ud130 \uad6c\uc870\ub97c \uc54c\uc544\ubcf4\ub824\uace0 \ud569\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \uc90c\uc778\ud130\ub137 \uae40\uc6b0\uc2b9\ub2d8\uc774 \uc791\uc131\ud558\uc2e0 \ub0b4\uc6a9\uacfc \uc131\ub2a5 \uad00\uc810\uc5d0\uc11c\ub3c4 \ud568\uaed8 \uc5ee\uc5b4\ubcf4\ub824\uace0 \ud569\ub2c8\ub2e4.\u00a0<a href=\"http://dl.dropbox.com/u/11343382/HBase%20Performance%20Tuning.pdf\">http://dl.dropbox.com/u/11343382/HBase%20Performance%20Tuning.pdf</a></p>\n<p>\uc77c\ub2e8 \uc265~~~</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/hbase/\">hbase</a> "}, "published": 1363945503, "categories": []}, {"updated": 1363905282, "alternate": [{"href": "http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-2/", "type": "text/html"}], "title": "HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 2", "author": "Daegeun Kim", "content": {"content": "<ul>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase/\">HBase \u2013 \uc2dc\uc791\ud558\uae30\uc5d0 \uc55e\uc11c</a></li>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-1/\">HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 1</a></li>\n</ul>\n<p>\ub0b4\uc6a9\uc5d0 \uc774\uc5b4\uc11c \uc2dc\uc791\ud569\ub2c8\ub2e4. \ud2c0\ub9b0 \ubd80\ubd84\uc774 \uc788\uc73c\uba74 \uc9c0\uc801 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4. :-) \uc18c\uc2a4\ub9cc \ucc38\uace0\ud558\uace0 \uc788\uc5b4\uc11c \uc2e4\uc81c\ub85c\ub294 \ud310\ub2e8\uc744 \uc798\ubabb\ud588\uc744 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p>\n<p>\uc124\uba85\uc740 doMiniBatchMutation \uba54\uc11c\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \ud569\ub2c8\ub2e4.\u00a0internalPut,\u00a0mutateRowsWithLocks \uba54\uc11c\ub4dc \ub4f1\uc758 \uad6c\ud604\uc774 \uc57d\uac04 \ub2e4\ub974\ub2c8 \ucc38\uace0\ud558\uc2dc\uae38 \ubc14\ub78d\ub2c8\ub2e4.</p>\n<ol>\n<li>\ub77d\uc744 \uc5bb\uc744 \uc218 \uc788\uc744 \ub9cc\ud07c \uc5bb\uace0,</li>\n<li>updateLatestStamp \uac12\uc744 \ud604\uc7ac\uc2dc\uac04\uc73c\ub85c \ubcc0\uacbd\ud55c\ub2e4.</li>\n<li>MVCC (Multi Version Consistency Control) \uce74\uc6b4\ud2b8~</li>\n<li>MemStore\uc5d0 \uba3c\uc800 \ubc18\uc601</li>\n<li>WAL\uc5d0 \ubcc0\uacbd\uc0ac\ud56d \ub85c\uadf8 \ucd94\uac00</li>\n<li>\ub77d \ud574\uc81c</li>\n<li>sync WAL</li>\n<li>MVCC \uc644\ub8cc \ub9c8\ud0b9</li>\n<li>Coprocessor \ud6c4\ud0b9</li>\n</ol>\n<p>\uc77c\ub2e8 \uc704\uc758 \uc21c\uc11c\ub85c \uc9c4\ud589\uc744 \ud569\ub2c8\ub2e4.</p>\n<p>1\ubc88\uc5d0\uc11c \uc5bb\uc744 \uc218 \uc788\uc744 \ub9cc\ud07c \uc5bb\ub294 \ub2e4\ub294 \uc758\ubbf8\ub294 \ub77d\uc744 \uc5bb\uc744 \uc218 \uc5c6\uc73c\uba74 \ub4a4\uc5d0 Put\uc774\ub098 Delete\ub294 \ubb34\uc2dc\ud558\uace0 2~9\ub97c \uc9c4\ud589\ud569\ub2c8\ub2e4. \uc2e4\ud328\ub85c \ucc98\ub9ac\ud558\ub294 \uac83\uc740 \uc544\ub2c8\uace0 while (batchOp.isDone()) { \u2026 } \ud1b5\ud574 \uc804\uccb4\ub97c \ubc18\ubcf5\uc801\uc73c\ub85c \uc218\ud589\ud569\ub2c8\ub2e4. 2\ubc88\uc740 \uc800 \uac12\uc744 \uc774\uc6a9\ud55c \ucf54\ub4dc\ub97c \ubcf4\uc9c0 \ubabb\ud588\uc73c\ubbc0\ub85c \uc124\uba85\uc740 \ub098\uc911\uc73c\ub85c \ubbf8\ub8e8\uaca0\uc2b5\ub2c8\ub2e4.</p>\n<p>3\ubc88\uc740 MVCC\ub77c\uace0\ud574\uc11c \ub098\ub984 consistency\ub97c \ubcf4\uc7a5\ud558\uae30\uc704\ud568\uc785\ub2c8\ub2e4. \uc870\ud68c\ub97c \ud560 \ub54c MVCC\ub97c \uc0ac\uc6a9\ud560\ud150\ub370(\uc0ac\uc6a9\ud55c\ub2e4\ub77c\uace0 \ud45c\ud604\ud574\uc57c\ud558\ub098. \ud760.?) \ucd5c\uc885\uc644\ub8cc\uac00 \ub418\uc9c0 \uc54a\uc740 \uc790\ub8cc\ub294 \uc870\ud68c\ud558\uc9c0 \ubabb\ud558\ub3c4\ub85d \ud558\uae30\uc704\ud55c \ubc29\ubc95\uc785\ub2c8\ub2e4. \uc2e4\uc81c\ub85c \uc5bc\ud54f \ucf54\ub4dc\ub97c \uc9c0\ub098\uce58\ub4ef \ubd24\ub294\ub370 Isolation \ub808\ubca8\ub3c4 \uc124\uc815\ud560 \uc218 \uc788\ub3c4\ub85d \ub418\uc788\uc5c8\ub294\ub370 \uadf8 \ub54c\u00a0READ_UNCOMMITTED \ub3c4 \uc788\uc5c8\uc73c\ub2c8 \uc870\ud68c\ud560 \ub54c \uadf8 \uae30\ub2a5\uc744 \ucc98\ub9ac\ud560 \uac83\uc73c\ub85c \ubd05\ub2c8\ub2e4. \uadf8\uac74 \ub098\uc911\uc5d0 \ub2e4\uc2dc \uc790\uc138\ud788 \ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.</p>\n<p>4\ubc88\uc740 \uc758\uc678\uc758 \uc21c\uc11c\uc600\ub294\ub370 WAL\uc5d0 \uba3c\uc800 \ubc18\uc601\uc744 \ud558\uc9c0 \uc54a\uace0 MemStore\uc5d0 \uba3c\uc800 \ubc18\uc601\uc744 \ud588\uc2b5\ub2c8\ub2e4. \uadf8\ub0e5 \uace0\ubbfc\uc744 \ud574\ubcf4\uba74, MVCC\ub85c 1\ucc28 \ubc29\uc5b4\ub97c \ud588\uc744 \uc218\ub3c4 \uc788\uc73c\ub2c8 \uad1c\ucc2e\ub2e4\uace0 \ud310\ub2e8\ud588\uc744 \uc218\ub3c4 \uc788\uace0, \uc2e4\ud328\ub85c \ubd88\ud544\uc694\ud55c \ub85c\uae45\uc744 \uc81c\uac70\ud55c\uac74\uac00 \uc2f6\uae30\ub3c4 \ud558\uace0 \uc544\uc9c1 \uc798 \ubaa8\ub974\uaca0\uc2b5\ub2c8\ub2e4.</p>\n<p>5\ubc88\uc740 WAL \ucd94\uac00, don\u2019t sync</p>\n<p>6\ubc88\uc740 \ub77d\uc744 \ud574\uc81c</p>\n<p>7\ubc88\uc740 WAL sync</p>\n<p>8\ubc88\uc740 \uc870\ud68c\ud560 \ub54c \uc77d\uc744 \uc218 \uc788\ub3c4\ub85d MVCC advance \uc791\uc5c5\uc744 \ud569\ub2c8\ub2e4.</p>\n<p>9\ubc88\uc740 \ub4f1\ub85d\ub41c coprocessor \uc911 postPut \ub610\ub294 postDelete \ud6c4\ud0b9\ud569\ub2c8\ub2e4.</p>\n<p>\ucc38\uace0\ub85c, WAL \ucd94\uac00\ub97c \uc2e4\ud328\ud558\uba74, rollback \uc791\uc5c5\uc744 \ud558\ub294\ub370 MemStore\uc5d0 \ubc18\uc601\uc0ac\ud56d rollback\uc744 \ud569\ub2c8\ub2e4.</p>\n<p>1\ubc88\uc5d0\ub300\ud574\uc11c \ucd94\uac00\ub85c \uc124\uba85\ud558\uba74, (lock\uc744 \ud68d\ub4dd\ud558\uc9c0 \ubabb\ud558\ub294 \uc608)</p>\n<p>row-level lock\uc744 \ucde8\ub4dd\ud558\ub294 \uac83\uc778\ub370, Put1, Put2\uac00 \uac19\uc740 row key\ub97c \uac00\uc9c4\ub2e4\uba74 \ub4a4\uc758 put \ubcc0\uacbd\uc0ac\ud56d\uc740 lock\uc744 \uc5bb\uc9c0 \ubabb\ud569\ub2c8\ub2e4. \uadf8\ub798\uc11c Put1\uc774 \uc644\ub8cc\ub41c \ub2e4\uc74c lock\uc744 \ubc18\ud658\ud55c \ud6c4 1~9\ubc88\uc774 \uc808\ucc28\ub97c \ubc18\ubcf5\ud558\uba74\uc11c \uc9c4\ud589\ub429\ub2c8\ub2e4. unit test \ucf54\ub4dc \ud558\ub098\ub97c \ucd94\uac00\ud574\uc11c \ud14c\uc2a4\ud2b8\ud574\ubd24\uc744 \ub54c</p>\n\nPut put1 &#61; new Put(k);\nput1.add(BYTES_FAMILY, QUALIFIER1, VALUE);\nputs.add(put1);\nPut put2 &#61; new Put(k);\nput2.add(BYTES_FAMILY, QUALIFIER2, VALUE);\nputs.add(put2);\n\n<p>\uc704\uc758 \ucf54\ub4dc\ub85c batch \ub610\ub294 put\ud558\uba74 1~9\ubc88\uc774 2\ubc88 \ubc18\ubcf5\ub429\ub2c8\ub2e4. \ud560\uaebc\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ud615\ud0dc\ub85c \ud574\uc57c\ud558\ub294\uac00 \ubd05\ub2c8\ub2e4. \uc804 \uc368\ubcf8\uc801\uc774 \uc5c6\uc5b4\uc11c \ub9de\ub294\uc9c4 \ubab0\uaca0\uc9c0\ub9cc \uad73\uc774 wal \ub450\ubc88\ud560 \ud544\uc694\ub294 \uc5c6\uc73c\ub2c8\u2026</p>\n\nPut put &#61; new Put(k);\nput.add(BYTES_FAMILY, QUALIFIER1, VALUE);\nput.add(BYTES_FAMILY, QUALIFIER2, VALUE);\nputs.add(put);\n\n<p>3, 8\ubc88\uc5d0\uc11c MVCC\uac00 \ub4f1\uc7a5\uc744 \ud558\ub294\ub370 4\ubc88\uc5d0 MemStore\ub85c \ubc18\uc601\ub420 \ub54c KeyValue \uac1d\uccb4\uc5d0 setMemstoreTS \uba54\uc11c\ub4dc\ub85c \ud574\ub2f9 entry number\uac00 \uc9c0\uc815\ub429\ub2c8\ub2e4.</p>\n<p>\uc5ec\uae30\uae4c\uc9c0 \uc885\ud569\ud574\ubcfc \ub54c, (\uc81c\uac00 \ubc1c\uacac \ubabb\ud55c \uac83\uc774 \uc788\uc744 \uc218 \uc788\uc73c\ub2c8 \ud2c0\ub9b0\uac8c \uc788\uac70\ub098 \ud558\uba74 \ub9d0\uc500\uc8fc\uc138\uc694. \uc5ec\ub7ec\ubd84 :-)</p>\n<ul>\n<li>HDFS\uc5d0 \uae30\ub85d\ud558\ub294 \uac83\uc740 WAL\ub9d0\uace0\ub294 \uc5c6\ub2e4.</li>\n<li>batch\ub294 atomic \ud558\uc9c0 \uc54a\ub2e4. put\uc5d0\uc11c \uc544\ubb34\ub9ac autoFlush \uc5c6\uc560\uace0 buffer size \uc62c\ub824\ub3c4 region server\uc5d0\uc11c row lock\uc744 \uc5bb\uc9c0\ubabb\ud558\uba74 \uc5bb\uc740 \uac83\uae4c\uc9c0\ub9cc \uc791\uc5c5\uc774 \uc774\ub8e8\uc5b4\uc9c0\uace0 \ub2e4\uc74c \uc808\ucc28\uc5d0\uc11c \ub2e4\uc2dc \uc791\uc5c5\uc774 \uc774\ub8e8\uc5b4\uc9c4\ub2e4.</li>\n</ul>\n<p>\ub4f1\ub4f1\ub4f1 \uc788\uace0, \uc9c0\uae08\uc740 Put \uac19\uc740 write op \uc744 \uba3c\uc800 \ubd10\uc11c \uadf8\ub807\uc9c0 scan \ubcf4\uba74 \uba58\ubd95\uc628\ub2e4.\u00a0WAL\uc740 \ub2e4\uc74c\uc5d0 \ub2e4\uc2dc \uc5b8\uae09\ud558\uaca0\uc2b5\ub2c8\ub2e4.</p>\n<p>\uc624\ub298 \uad81\uae08\uc99d \ucd94\uac00.</p>\n<ul>\n<li>snapshot\uacfc WAL\uc758 \uad00\uacc4\uac00 \uc5b4\ub5bb\uac8c \ub418\ub098\ub3c4 \uad81\uae08\ud558\ub2e4. \uc65c\ub0d0\uba74 MemStore\uac00 snapshot\uc744 \ub728\uace0 \ub098\uba74 \uc7ac\uad6c\ub3d9\ub418\uac70\ub098 \ud560 \ub54c \ucd94\uc815\ud558\uae30\uc5d4 MemStore\uc5d0 WAL replay\ub97c \ud574\uc918\uc57c\ud560 \uac83 \uac19\uc740\ub370, \uc660\uc9c0\u00a0startCacheFlush / completeCacheFlush \uac00 \uc5f0\uad00\uc131\uc774 \uc788\uc5b4\ubcf4\uc778\ub2e4.</li>\n<li>\uc544\uc9c1 \ucef4\ud329\uc158\ucabd \uc18c\uc2a4\ub294 \ubabb \ubd24\ub294\ub370 MemStore\uac00 snapshot\uc744 \ub730 \ub54c \ub2e4\ub978 StoreFile\uacfc \ud569\uccd0\uc9c0\uba74\uc11c \uc0c8\ub85c\uc6b4 StoreFile\uc744 \ub9cc\ub4dc\ub294 \uac83\uc774 \ub9c8\uc774\ub108\ucef4\ud329\uc158\uc77c\uae4c?</li>\n<li>\uc544\ub2c8\uba74 \uadf8\ub0e5 StoreFile\uacfc \ub2e4\ub978 StoreFile\uacfc \ud569\uccd0\uc9c0\ub294\uac8c \ub9c8\uc774\ub108\ucef4\ud329\uc158\uc77c\uae4c?</li>\n<li>\uc544\ub2c8\uba74 MemStore\uc640 \ubaa8\ub4e0 StoreFile\uc774 \ud569\uccd0\uc9c0\ub294\uac8c \ub9c8\uc774\ub108\ucef4\ud329\uc158\uc77c\uae4c? (\ub2e8, \ubaa8\ub4e0\uc758 \uae30\uc900\uc740 \uac19\uc740 Region\uc758 CF\uaca0\uc9c0?)</li>\n</ul>\n<p>\uc774\uac74 \ub2e4\uc74c\uc5d0 \uc870\uc0ac. \ub450\ub465~</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/batch/\">batch</a>, <a href=\"http://blog.geekple.com/tag/bigtable/\">bigtable</a>, <a href=\"http://blog.geekple.com/tag/delete/\">delete</a>, <a href=\"http://blog.geekple.com/tag/hbase/\">hbase</a>, <a href=\"http://blog.geekple.com/tag/memstore/\">memstore</a>, <a href=\"http://blog.geekple.com/tag/put/\">put</a>, <a href=\"http://blog.geekple.com/tag/wal/\">wal</a> "}, "published": 1363905282, "categories": []}, {"updated": 1363890393, "alternate": [{"href": "http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-1/", "type": "text/html"}], "title": "HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 1", "author": "Daegeun Kim", "content": {"content": "<ul>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase/\">HBase \u2013 \uc2dc\uc791\ud558\uae30\uc5d0 \uc55e\uc11c</a></li>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-1/\">HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 1</a></li>\n</ul>\n<p><strong>\ud2c0\ub9b0 \ubd80\ubd84\uc774 \uc788\uc744 \uc218 \uc788\ub294\ub370 \uc870\uc5b8\ud574\uc8fc\uc2dc\uba74 \uc800\uc5d0\uac8c \ub9ce\uc740 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4. :-)</strong></p>\n<p>\uccab\ubc88\uc9f8 \uad81\uae08\uc99d\uc73c\ub85c, HBase\ub294 \ub0b4\ubd80\uc801\uc73c\ub85c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294 \uc808\ucc28\uac00 \uc5b4\ub5bb\uac8c \ub418\ub294\uac00 \uad81\uae08\ud588\uc2b5\ub2c8\ub2e4. \uc18c\uc2a4\ucf54\ub4dc\ub97c \ub2e4 \ubcf8\uac74 \uc544\ub2c8\uace0 \uc9c0\uae08\ub2e8\uacc4\ub294 \uc804\ubc18\uc801\uc778 \ud750\ub984\uc744 \uc911\uc810\uc73c\ub85c \ubcf4\ub294 \ub2e8\uacc4\ub77c\uc11c \uc138\ubd80\uc801\uc778 \uc808\ucc28\ub098 \ud788\uc2a4\ud1a0\ub9ac\ub97c \uc54c \uc218\ub294 \uc5c6\uc744 \uac83 \uac19\uace0 \uac04\ub2e8\ud558\uac8c \ubb49\ub6b1\uadf8\ub824\uc11c \uc815\ub9ac\ud558\ub824\uace0 \ud55c\ub2e4.</p>\n<p>\uc77c\ub2e8 \ub370\uc774\ud130\ub97c \uc77d\uae30\ub294 \uc0dd\uac01\ubcf4\ub2e4 \ubcf5\uc7a1\ud558\uace0 \uc4f0\uae30\ubd80\ud130 \ud558\uaca0\ub2e4. (\uc4f0\uae30\ub294 \uc624\ud788\ub824 \uc0c1\ub300\uc801\uc73c\ub85c \uac04\ub2e8\ud558\ub2e4\ub294 \u2026)</p>\n<p>HBase Client \ucf54\ub4dc\ub97c\u00a0HTableInterface\ub97c \uc774\uc6a9\ud574 put \uba85\ub839\uc744 \uc694\uccad\ud558\ub294 \ubc29\ubc95\uc740</p>\n<ul>\n<li>batch</li>\n<li>put</li>\n<li>checkAndPut</li>\n<li>mutateRow</li>\n</ul>\n<p>\ub4f1\uc774 \uc788\ub294 \uac83 \uac19\uc2b5\ub2c8\ub2e4. \ucf54\ub4dc\ub97c \ubcf4\ub2e4 \uc9c0\ub098\ucce4\uc744 \uc218\ub3c4 \uc788\uc9c0\ub9cc \uc774 \uc815\ub3c4 \uc788\ub294 \uac83 \uac19\uc2b5\ub2c8\ub2e4. \uc77c\ub2e8 batch\uc640 put\uc740 \ucd5c\uc885\uc801\uc73c\ub85c\u00a0processBatch \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud558\ubbc0\ub85c \uac19\ub2e4\uace0 \ubcfc \uc218 \uc788\uace0 (\ub2e8, batch\uc5d0\uc11c put\ub9cc \uc37c\uc744 \ub54c \uac19\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4.) checkAndPut \uc758 \uacbd\uc6b0\ub294 \ucd5c\uc885 \ud615\uc0c1\uc740 Put\uc744 \uc704\ud55c \uac83\uc774\uc9c0\ub9cc \uc77c\uc885\uc758 CAS \uac19\uc740\uac70\uc8e0. \uc870\uac74\uc774 \ub9de\uc744 \uacbd\uc6b0\ub9cc Put\uc744 \ud558\uaca0\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4. \uc5ec\uae30\uc11c \uc7a0\uae50, batch, put \uba54\uc11c\ub4dc\uc640 mutateRow\uac00 \ub2e4\ub978\uc810\uc744 \uc124\uba85\ud558\uba74, atomic\uc778\uc9c0 \uc544\ub2cc\uc9c0\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4. put\uc758 \uacbd\uc6b0\ub294 \uc124\uc815\uc5d0\ub530\ub77c autoFlush \uc5ec\ubd80\ub97c \uc124\uc815\ud560 \uc218 \uc788\uace0, client write buffer size (default 2MiB) \ub97c \ucd08\uacfc\uc5ec\ubd80\uc5d0\ub530\ub77c batch \ucc98\ub7fc \ub3d9\uc791\ud569\ub2c8\ub2e4. mutateRow\uc758 \uc81c\ud55c\uc740 \uc5ec\ub7ec row\ub97c atomic\ud558\uac8c \ud560 \uc218 \uc788\ub294 \uac83\uc740 \uc544\ub2c8\uace0 \uac19\uc740 row\ub97c \ub300\uc0c1\uc73c\ub85c \ud558\uba70 batch, put\uc758 \uacbd\uc6b0\ub294 \ub2e4\ub978 row\ub3c4 \uc81c\ud55c\uc5c6\uc774 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc5ec\uae30\uc11c \ud55c\uac00\uc9c0 \uc5bb\uc744 \uc218 \uc788\ub294 \uac83\uc740 atomic\ud558\uac8c \ud558\uace0 \uc2f6\ub2e4\uba74 \ud558\ub098\uc758 row\uc5d0\uc11c CF\ub97c \uc774\uc6a9\ud55c \ubc29\ubc95\uc73c\ub85c \ud574\uc57c\ud558\uaca0\ub124\uc694. (\uc81c\uac00 \uc798\ubabb \ud30c\uc545\ud588\ub2e4\uba74 \ub204\uac00 \ub9d0\uc500 \uc880\u2026)</p>\n<p>put -&gt; doPut -&gt; flushCommits -&gt; HConnection.processBatch -&gt; HConnectionManager.processBatchCallback -&gt; server.multi -&gt; HRegionServer.multi -&gt; HRegion.batchMutate -&gt; HRegion.doMiniBatchMutation -&gt; \u2026</p>\n<p>mutateRow -&gt; server.mutateRow -&gt; HRegionServer.mutateRow -&gt; HRegion.mutateRow -&gt; HRegion.mutateRowsWithLocks -&gt; \u2026</p>\n<p>\uc704 \uacfc\uc815\uc740 \uc138\ubd80\uc801\uc778 \uc124\uba85\uc740 \ub2e4 \ube8d\ub2c8\ub2e4. :-) \uc74c. \uc2dc\uc791\uc740 client \ucabd\uc744 \uc124\uba85\ud558\ub824\uace0 \uc801\uc740 \uac83\uc740 \uc544\ub2cc\ub370 client \uae4c\uc9c0 \ud3ec\ud568\ub418\uc5c8\ub124\uc694. \uadf8\ub7fc \ucd94\uac00\ub85c \ucf54\ub4dc\ub97c \ubcf8 \uac83\uc744 \uc124\uba85\ud558\uba74,</p>\n<ul>\n<li>\uc774\uc804 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub3c4 \uc124\uba85\ud588\ub4ef\uc774 \ud558\ub098\uc758 Table\uc740 \uc5ec\ub7ec Region\uc73c\ub85c \ubd84\uc0b0\ub420 \uc218 \uc788\uace0 \uac01 Region\uc740 \uc9c0\uc815\ub41c start \u2013 end key\ub97c \uac00\uc9d1\ub2c8\ub2e4. \uadf8\ub807\ub2e4\uba74 row \ud0a4\uc5d0 \ud574\ub2f9\ud558\ub294 region\uc744 \ucc3e\uc544\uc57c\ud569\ub2c8\ub2e4. \uadf8 \ucf54\ub4dc\ub294 \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0 \ud3ec\ud568\ub418\uc5b4\uc788\uc2b5\ub2c8\ub2e4.</li>\n</ul>\n<p>\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc120\u00a0locateRegion \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 region\uc758 \uc704\uce58\ub97c \ucc3e\uc2b5\ub2c8\ub2e4. \ud074\ub77c\uc774\uc5b8\ud2b8 \ub0b4\uc6a9 \ub2f4\ub294 \uac83\uc740 \uc5ec\uae30\uc11c \uc911\uc9c0. :-)</p>\n<p>\uac00\uc815, client\ub294 \uc694\uccad\ud560 \uba85\ub839\uacfc \uc704\uce58\uc815\ubcf4\ub97c \uc774\uc820 \uc54c\uace0 \uc788\uace0 \uc774\ubbf8 \uadf8 \uc815\ubcf4\ub97c \uc11c\ubc84\uc5d0 \uc694\uccad\ud588\uc74c\uc744 \uac00\uc815\ud569\ub2c8\ub2e4. \uc5ec\uae30\uc11c\ub294 \ud558\ub098\uc758 Region\ub9cc \uadf8 \ub300\uc0c1\uc774 \ub41c\ub2e4\ub77c\uace0 \uac00\uc815\ud558\uace0 \uc4f0\uae30\ub294 \uc5b4\ub5a4 \uc808\ucc28\ub97c \ubc1f\ub294\uc9c0 \uc54c\uc544\ubcf4\ub3c4\ub85d \ud569\ub2c8\ub2e4.</p>\n<p>\ub2e4\uc74c \ud3ec\uc2a4\ud2b8\uc5d0\u2026</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/bigtable/\">bigtable</a>, <a href=\"http://blog.geekple.com/tag/hbase/\">hbase</a> "}, "published": 1363890393, "categories": []}, {"updated": 1363881595, "alternate": [{"href": "http://blog.geekple.com/2013/03/22/hbase/", "type": "text/html"}], "title": "HBase", "author": "Daegeun Kim", "content": {"content": "<ul>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-1/\">HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 1</a></li>\n<li><a href=\"http://blog.geekple.com/2013/03/22/hbase-%ec%96%b4%eb%96%bb%ea%b2%8c-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%9d%bd%ea%b3%a0-%ec%93%b0%eb%8a%94%ea%b0%80-2/\">HBase \u2013 \uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00? \u2013 2</a></li>\n</ul>\n<p>\uc774\ubc88\uc8fc\ubd80\ud130 \uac1c\uc778\uc801\uc778 \uacf5\ubd80\ub85c HBase \uc18c\uc2a4\ub97c \ubd84\uc11d\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4. \uc9e7\uc740 \uc601\uc5b4\ub77c \uc5b4\ub835\uc9c0\ub9cc BigTable \ub17c\ubb38\ub3c4 \ud568\uaed8 \ubcd1\ud589\ud574\uc11c \ubcfc \uc0dd\uac01\uc785\ub2c8\ub2e4. \uc77c\ub2e8 \uba3c\uc800 HBase\ub97c \ubcf4\uae30\uc5d0 \uc55e\uc11c \uad81\uae08\ud588\ub358 \uc0ac\ud56d\ub4e4\uc744 \uc815\ub9ac\ub97c \ud558\uace0 \uc2dc\uc791\ud569\ub2c8\ub2e4. \ubb3c\ub860 \uc774\ubbf8 \uc2dc\uc791\ud588\uc9c0\ub9cc \uadf8 \ub54c \uc2dc\uc791\uc804\uc5d0 \uc5d0\ubc84\ub178\ud2b8\uc5d0 \uc815\ub9ac\ud588\ub358 \ub0b4\uc6a9\uc744 \ube14\ub85c\uadf8\uc5d0 \uc815\ub9ac\uc8e0.</p>\n<p><strong>\ud2c0\ub9b0 \ubd80\ubd84 \ub9d0\uc500\ud574\uc8fc\uc2dc\uba74 \uac10\uc0ac\ud558\uaca0\uc2b5\ub2c8\ub2e4. :-)</strong></p>\n<ul>\n<li>\uc5b4\ub5bb\uac8c \ub370\uc774\ud130\ub97c \uc77d\uace0 \uc4f0\ub294\uac00?</li>\n<li>\uc5b4\ub5bb\uac8c RowKey\uc5d0 \ud574\ub2f9\ud558\ub294 \ub370\uc774\ud130\ub97c \uc870\ud68c, \ubcc0\uacbd(DEL, INC, APPEND \ud3ec\ud568)\ud558\ub294\uac00?</li>\n<li>\uc7a5\uc560\uc0c1\ud669\uc5d0\ub294 \uc5b4\ub5bb\uac8c \ub300\uc751\ud558\ub294\uac00?</li>\n<li>\ub370\uc774\ud130\ub97c \uc5b4\ub5bb\uac8c \uce90\uc26c\ud558\uba70 read performance\ub97c \uac1c\uc120\ud558\ub294\uac00?</li>\n<li>\ub370\uc774\ud130\ub97c \uc5b4\ub5a4 \uad6c\uc870\ub85c \uc800\uc7a5\ud558\ub294\uac00?</li>\n<li>\ub370\uc774\ud130\ub294 \uc5b4\ub5bb\uac8c \ubd84\uc0b0\ud558\ub294\uac00?</li>\n<li>\ucef4\ud329\uc158 \uc885\ub958, \ub3d9\uc791 \uadf8\ub9ac\uace0 \uc65c \ud558\ub294\uac00?</li>\n</ul>\n<p>\ucc98\uc74c\uc5d0 \uc774\ub7f0 \uad81\uae08\uc99d\uc774 \ub4e4\uc5c8\ub358\uac70\uace0 \uc77c\ubd80 \uc18c\uc2a4\ucf54\ub4dc\ub97c \ubcf4\uba74\uc11c \ub354 \ub9ce\uc740 \uad81\uae08\uc99d\uc774 \uc5f0\uc1c4\uc801\uc73c\ub85c \ubc1c\uc0dd\ud55c\ub2e4. \uc77c\ub2e8 \uadf8 \ubd80\ubd84\uc740 \ud558\ub098\uc529 \ucc28\ucc28 \ud558\uba74\uc11c \ud480\uc5b4\uac00\ub824\uace0 \ud55c\ub2e4. \ubb3c\ub860 \uc9c0\uae08\ub3c4 \uad81\uae08\uc99d\uc744 \ud574\uacb0\ud558\uc9c0 \ubabb\ud55c \ubd80\ubd84\uc774 \ub9ce\ub2e4. (\uae30\uaecf\ud574\uc57c \uba87 \uc904 \ubcf8 \ucf54\ub4dc\ub77c.)</p>\n<p>BigTable \ub17c\ubb38\uc744 \ubcf4\uba74 \uc6a9\uc5b4\uac00 \ub2ec\ub77c\uc11c \ud5f7\uac08\ub9ac\ub294\ub370 \uc774\uac83\ubd80\ud130 \uc815\ub9ac\ud55c\ub2e4.</p>\n<h3>BigTable &lt;-&gt; HBase</h3>\n<ul>\n<li>Table &lt;-&gt; Table</li>\n<li>Tablet &lt;-&gt; Region</li>\n<li>TabletServer &lt;-&gt; RegionServer</li>\n<li>? &lt;-&gt; Store</li>\n<li>MemTable &lt;-&gt; MemStore</li>\n<li>SSTable &lt;-&gt; StoreFile (HFile)</li>\n<li>Chubby &lt;-&gt; ZooKeeper</li>\n<li>GFS &lt;-&gt; HDFS</li>\n</ul>\n<h3>\uad00\uacc4</h3>\n<ul>\n<li>\ud558\ub098\uc758 Table\uc740 0\uac1c \ub610\ub294 \ud558\ub098 \uc774\uc0c1\uc758 Region\uc73c\ub85c \uad6c\uc131\ub418\uba70</li>\n<li>\ud558\ub098\uc758 Region\uc740 CF \ub2f9 \ud55c\uac1c\uc758 Store\ub97c \uac00\uc9c0\uba70</li>\n<li>\ud558\ub098\uc758 Store\uc5d0\ub294 \ud558\ub098\uc758 MemStore\uc640 0\uac1c \ub610\ub294 \ud558\ub098 \uc774\uc0c1\uc758 StoreFile\uc744 \uac00\uc9c4\ub2e4.</li>\n</ul>\n<p>\uc18c\uc2a4\ucf54\ub4dc\ub97c \ubcf4\ub2c8 \uc544\uc8fc \uba58\ubd95\uc778\ub370, \uc624\ud788\ub824 Put \uba85\ub839\uc774 \uc624\ud788\ub824 \uc27d\uace0 Scan \uba85\ub839\uc774 \uc624\ud788\ub824 \ucf54\ub4dc \ubcf4\uae30 \uc5b4\ub835\uc2b5\ub2c8\ub2e4. \uac04\ub2e8\ud558\uac8c \ubc1b\uc740 \ub290\ub08c\uc744 \uc815\ub9ac\ud558\uba74 \u2026</p>\n<p>\ub2e4\uc74c \ud3ec\uc2a4\ud2b8\uc5d0 \uae30\ub85d\ud558\uaca0\uc2b5\ub2c8\ub2e4. :-)</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/bigtable/\">bigtable</a>, <a href=\"http://blog.geekple.com/tag/hadoop/\">Hadoop</a>, <a href=\"http://blog.geekple.com/tag/hbase/\">hbase</a> "}, "published": 1363881595, "categories": []}, {"updated": 1361815231, "alternate": [{"href": "http://blog.geekple.com/2013/02/26/hadoop-monitoring-metrics/", "type": "text/html"}], "title": "Hadoop Monitoring \u2013 Metrics", "author": "Daegeun Kim", "content": {"content": "<p><a href=\"http://blog.geekple.com/hadoop-monitoring/\">Hadoop \u2013 Monitoring</a>\u00a0\uccab\ubc88\uc9f8 \uae00</p>\n<p>\ud558\ub461 \ubaa8\ub2c8\ud130\ub9c1\uc744 \ud558\uae30\uc5d0 \uc55e\uc11c \uc5b4\ub5bb\uac8c \uad00\ub828\ub41c \uc815\ubcf4\ub97c \ucd94\ub824\uc62c \uc218 \uc788\ub294\uc9c0 \ubc29\ubc95\uc744 \uc54c\uc544\ubd05\ub2c8\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c \uc81c\uacf5\ud558\ub294 \ubc29\ubc95 \uc911 metrics\uc5d0\ub300\ud574 \uc54c\uc544\ubd05\ub2c8\ub2e4.</p>\n<p>\ubc84\uc804\uc740 \ud655\uc2e4\ud558\uc9c4 \uc54a\uc9c0\ub9cc \uc544\ub798\uc640 \ube44\uc2b7\ud560\uaecd\ub2c8\ub2e4.</p>\n<ul>\n<li>hadoop-metrics.properties (Hadoop 0.20.x, Hadoop 0.21.x, Hadoop 0.22.x, CDH3)</li>\n<li>hadoop-metrics2.properties (Hadoop 0.20.20x, Hadoop 1.x.x, Hadoop 0.23.x, Hadoop 2.x.x, CDH4, HDPv1, HDPv2)</li>\n</ul>\n<p>\ubc84\uc804\uc744 \ubc18\ubcf5\uc801\uc73c\ub85c \uc801\uae30\uc5d0\ub294 \ub108\ubb34 \uae38\uc5b4\uc9c0\uc11c \uc544\ub798\ubd80\ud130\ub294 Hadoop 0.20.x, CDH3\ub294 0.20.x \ub85c, Hadoop 0.20.20x, Hadoop 1.x.x, HDPv1 \uc740 1.x.x \ub85c, Hadoop 0.23.x, Hadoop 2.x.x, CDH4 \ub294 Hadoop 2.x.x \ub85c \ucff5\ucff5.</p>\n<p>\uc0c1\uc138\ud55c \uc124\uc815 \ubc29\ubc95\uc740 \uc774 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c \uc5b8\uae09\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub2e4\ub978 \ub9ce\uc740 \ube14\ub85c\uadf8\uc5d0\uc11c\ub3c4 \uc5b8\uae09\ud558\uace0 hadoop-metrics.properties \ub610\ub294 hadoop-metrics2.properties \ub97c \ubd10\ub3c4 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>\n<ul>\n<li>hadoop-metrics.properties \uc124\uc815 \ubc29\ubc95\uc740\u00a0<a href=\"http://blog.cloudera.com/blog/2009/03/hadoop-metrics/\">Cloudera \ube14\ub85c\uadf8 \ucc38\uc870</a></li>\n<li>hadoop-metrics2.properties \uc124\uc815 \ubc29\ubc95\ub3c4\u00a0<a href=\"http://blog.cloudera.com/blog/2012/10/what-is-hadoop-metrics2/\">Cloudera \ube14\ub85c\uadf8 \ucc38\uc870</a></li>\n</ul>\n<p>\ucc38\uace0\ub85c, hadoop-metrics2 \ub54c\ubb38\uc5d0 apache commons-configuration\uc774 \uc5f0\uad00\ub429\ub2c8\ub2e4.</p>\n<p>metrics \ubc84\uc804 1\uc758 \uacbd\uc6b0\ub294 context\uc640 plugin\uc758 \uad00\uacc4\ub294 1\ub300 1\uc785\ub2c8\ub2e4. \ubb3c\ub860 Composite pattern \uc73c\ub85c \ud65c\uc6a9\ud55c CompositeContext\uac00 \uc788\uc2b5\ub2c8\ub2e4. (FileContext, GangliaContext \ub4f1 Context\ub97c \ubd99\uc774\ub294\ub370 \uc2e4\uc81c\ub85c Context\ub77c\uace0 \ubcf4\uae34 \uc560\ub9e4\ud55c\ub370 \uc774\ub807\uac8c \uba85\uba85\ud588\ub294\uc9c0\ub294 \ubaa8\ub974\uaca0\uc2b5\ub2c8\ub2e4. metrics \ubc84\uc804 2\uc5d0\uc11c\ub294 \uc811\ubbf8\uc0ac\uac00 Sink\ub85c \ubc14\ub01d\ub2c8\ub2e4.) \ub0b4\ubd80\uc801\uc73c\ub85c \uc0ac\uc6a9\uc790\uac00 \uc9c0\uc815\ud55c \uc8fc\uae30\ub85c \uba54\ud2b8\ub9ad\uc744 \uc870\ud68c\ud558\uace0 \uacb0\uacfc \ub370\uc774\ud130\ub97c \uc124\uc815\ud55c \ud50c\ub7ec\uadf8\uc778\uc5d0 \uc804\ub2ec\ud569\ub2c8\ub2e4.</p>\n<ul>\n<li>jvm</li>\n<li>dfs</li>\n<li>mapred</li>\n<li>rpc</li>\n<li>\u2026</li>\n</ul>\n<p>(Prefix/Daemon &gt; Context &gt; Record &gt; Metrics) metrics \ubc84\uc804 2\uc758 \uacbd\uc6b0\ub294 \ubcf4\ub2e4 \ub2e4\uc591\ud574\uc9c0\uba70 prefix/daemon\uacfc plugin\uc758 \uad00\uacc4\uac00 1\ub300 N\uc785\ub2c8\ub2e4.\u00a0filter \uae30\ub2a5\ub3c4 \uc788\uc5b4\uc11c \uc77c\ubd80 \uba54\ud2b8\ub9ad\ub9cc \uc5ec\uacfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub2e4\uc74c\uc740 metrics \ubc84\uc804 2\uc758 context \ubaa9\ub85d\uc785\ub2c8\ub2e4.</p>\n<ul>\n<li>jvm,\u00a0rpc,\u00a0rpcdetailed,\u00a0metricssystem,\u00a0mapred,\u00a0dfs,\u00a0ugi</li>\n<li>jvm,\u00a0rpc,\u00a0rpcdetailed,\u00a0metricssystem,\u00a0mapred,\u00a0dfs,\u00a0ugi, yarn (hadoop-2.x.x)</li>\n</ul>\n<p>metrics \ubc84\uc804 1\uacfc \ub2e4\ub974\uac8c prefix \uac1c\ub150\uc774 \uc788\ub294\ub370 \uc774\ub294 daemon\uc73c\ub85c \uc774\ud574\ud558\uba74 \uc27d\uc2b5\ub2c8\ub2e4. (prefix\uc5d0\ub300\ud55c \uc77c\ubd80 \ub0b4\uc6a9\uc740 \uc704 \ube14\ub85c\uadf8 \ud3ec\uc2a4\ud2b8\uc5d0 \uae30\ub85d\ub418\uc5b4\uc788\uc2b5\ub2c8\ub2e4.) \uacc4\uc18d prefix\ub77c\uace0 \ubd88\ub7ec\uc57c\ud560\uc9c0\ub3c4 \uc560\ub9e4\ud569\ub2c8\ub2e4\ub9cc prefix \ub85c \ucff5\ucff5.</p>\n<ul>\n<li>NameNode, DataNode, JobTracker, TaskTracker, MapTask, ReduceTask</li>\n<li>NameNode, SecondaryNameNode, DataNode, JournalNode, JobHistoryServer, ResourceManager, NodeManager, MRAppMaster,\u00a0MapTask, ReduceTask</li>\n</ul>\n<p>Cloudera \ube14\ub85c\uadf8\uc5d0\ub294 \uc77c\ubd80 \ube60\uc838\uc788\ub294\ub370 \uba87\uac1c \ub354 \ucc44\uc6e0\uc2b5\ub2c8\ub2e4(\ubb3c\ub860 \ubc84\uc804\uc5d0\ub530\ub77c \uc5c6\uc744 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.). \uc228\uc740 \uae00\uc790 \ucc3e\uae30. \u314b\u314b \ubb50 \uc77c\ub2e8 \uc18c\uc2a4\ubcf4\uace0 \uc801\uc740\uac70\ub2c8 \ub9de\uc744\uaebc\uace0 \uc704\uc5d0 \uc801\ud78c prefix \uc678\uc5d0\ub3c4 \ub9ce\uc740 \uac83\uc774 \ucd94\uac00\ub420 \uc218 \uc788\ub294 \uad6c\uc870\uc785\ub2c8\ub2e4. \uac01 prefix \ub294 \ub2e4\uc591\ud55c context\ub97c \ud3ec\ud568\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc608\ub85c\ub4e4\uba74 DataNode\ub294 jvm, dfs, rpc, rpcdetailed \ub4f1\uc744 \uac00\uc9c0\ub294 \uad6c\uc870\uc785\ub2c8\ub2e4. \ucc38\uace0\ub85c \uba54\ud2b8\ub9ad\uc2dc\uc2a4\ud15c\uc740 singleton \ud615\ud0dc\ub85c \uad00\ub9ac\ud569\ub2c8\ub2e4. \uc18c\uc2a4\ub97c \ubcf4\uc2dc\uba74 \uc544\uc2dc\uaca0\uc9c0\ub9cc \ub3c5\ud2b9\ud55c \ud615\ud0dc\ub85c singleton\uc744 \uc720\uc9c0\ud569\ub2c8\ub2e4.</p>\n<p>\uadfc\ub370 \uc5ec\uae30\uc11c \ubc18\uc804\uc774 \uc788\ub2e4. metrics \ubc84\uc804 2\ub97c \uc4f0\ub294 Hadoop 1.x.x, Hadoop 2.x.x \ub294 \uac19\uc740 \ubc29\uc2dd\uc758 \uc0c8\ub85c\uc6b4 Metrics \ubc84\uc804 2 \uac19\uc9c0\ub9cc \uc57d\uac04 \ub2e4\ub978\ub370 \uc544\ub798\uc640 \uac19\uc774 Todd Lipcon \uc774 \uc5b8\uae09\ud588\ub4ef\uc774 \uc57d\uac04 \ub2e4\ub985\ub2c8\ub2e4. \ubc31\ud3ec\ud2b8\ud558\uae30\uc5d4 \uc774\uc81c \ub2a6\uc740 \ub4ef \ud569\ub2c8\ub2e4. \uadf8\ub798\uc11c \ub300\ubd80\ubd84\uc758 \ud558\ub461 \uc5d0\ucf54\uc2dc\uc2a4\ud15c\uc740 \ubc84\uc83c\ubcc4 Metrics\uc744 \uc704\ud574 \ube4c\ub4dc\ub3c4 \ub2ec\ub77c\uc9d1\ub2c8\ub2e4. \uad00\ub828 \uc774\uc288\u00a0<a href=\"https://issues.apache.org/jira/browse/HADOOP-7734\">https://issues.apache.org/jira/browse/HADOOP-7734</a></p>\n<p><strong>\uc544\ud0a4\ud14d\uccd0</strong></p>\n<p>Metrics \ubc84\uc804 1\uc758 \uacbd\uc6b0\ub294 Context \ubcc4 \uc2a4\ub808\ub4dc\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4. (\uc815\ud655\ud788\ub294 plugin \ub2f9 \ud558\ub098\uc758 \uc2a4\ub808\ub4dc\uc778\ub370 1\ub300 1\uad00\uacc4\uc774\ub2c8 \uadf8\ub807\uac8c \uc801\uc740 \uac83 \uc785\ub2c8\ub2e4.) \uadf8\ub9ac\uace0 \uad6c\uc870\uac00 \uad49\uc7a5\ud788 \uac04\ub2e8\ud558\uac8c \uad6c\uc131\ub418\uc5b4\uc788\uc2b5\ub2c8\ub2e4. \uadf8\uc640 \ub300\uc870\uc801\uc73c\ub85c Metrics \ubc84\uc804 2\uc758 \uacbd\uc6b0\ub294 prefix \uc5d0\uc11c instance \uc218\uc5d0 \ube44\ub840\ud574\uc11c \uacb0\uacfc\uc801\uc73c\ub860 \uc2a4\ub808\ub4dc\uac00 \uc0dd\uc131\ub429\ub2c8\ub2e4. \uac01 Sink\ub294 Circular Buffer(queue)\ub97c \ub450\uace0 \ucc98\ub9ac\ub97c \ud569\ub2c8\ub2e4. \ubb3c\ub860 \uae30\ubcf8 buffer \ud06c\uae30\ub294 1\uc774\ub77c\uc11c \ud544\uc694\ud55c \uacbd\uc6b0 \ud06c\uae30\ub97c \uc870\uc808\ud558\uc2dc\uae38 \ubc14\ub78d\ub2c8\ub2e4. [prefix].sink.[instance].queue.capacity \ub85c \uc124\uc815\ud558\uba74 \ub429\ub2c8\ub2e4. buffer \ud06c\uae30\ub97c \ucd08\uacfc\ud55c \uacbd\uc6b0 \ub4a4 \ub2a6\uac8c \ub4e4\uc5b4\uc628 metrics \ub294 \ubb34\uc2dc\ub429\ub2c8\ub2e4.</p>\n<p>sink\uc758 period\ub97c \uac00\uc9c0\uace0 \ucd5c\ub300\uacf5\ubc30\uc218\ub97c \uad6c\ud574\uc11c \uc8fc\uae30\uc801\uc73c\ub85c source\uc5d0\ub300\ud574 snapshot\uc744 \uad6c\ud569\ub2c8\ub2e4. \uacb0\ub860\uc740 \ub418\ub3c4\ub85d \ubc30\uc218\ub85c \ud558\uace0 \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 1\ucd08\ub9c8\ub2e4 snapshot\uc744 \uad6c\ud569\ub2c8\ub2e4.</p>\n<p>[prefix].sink.A \uc640 [prefix].sink.B \uac00 \uac01\uac01 5\ucd08, 10\ucd08\ub77c\uba74 5\ucd08\ub2e8\uc704\ub85c snapshot\uc744 \uad6c\ud558\uace0 \uac01\uac01 \ucc28\ub840\uac00 \ub420 \ub54c\ub9cc sink \ud569\ub2c8\ub2e4. \uadf8\ub807\ub2e4\uba74 5\ucd08, 3\ucd08\ud558\uba74 1\ucd08\ub2e8\uc704\ub85c snapshot\uc744 \uad6c\ud558\uace0 5\ubc88 snapshot \uad6c\ud560 \ub54c A\ub97c sink\ud558\uace0 B\ub294 3\ubc88 \uad6c\ud55c\ub2e4\uc74c\uc5d0 sink\ub97c \uad6c\ud569\ub2c8\ub2e4.</p>\n<p>Metrics \ubc84\uc804 2\uc758 \uacbd\uc6b0\ub294 sink \uacfc\uc815\uc5d0\uc11c \uc7a5\uc560\uac00 \ubc1c\uc0dd\ud560 \uacbd\uc6b0 retry/back-off \uc804\ub7b5\uc744 \ucde8\ud569\ub2c8\ub2e4. Retry/BackOff\uc5d0\ub300\ud574\uc11c \uc801\uc5c8\ub358 \ud3ec\uc2a4\ud2b8\u00a0<a href=\"http://blog.geekple.com/2011/12/26/retry-backoff-algorithm/\">http://blog.geekple.com/2011/12/26/retry-backoff-algorithm/</a>\u00a0Metrics \ubc84\uc804 2\uc5d0\uc11c\ub294 retry.delay / retry.backoff \uac12\uc744 \uae30\uc900\uc73c\ub85c rety.count \uac12 \ub9cc\ud07c \uc2dc\ub3c4\ud569\ub2c8\ub2e4. \uac01\uac01 \uae30\ubcf8 \uac12\uc740 10\ucd08 / 2\ubc30 / 1\ubc88 \uc785\ub2c8\ub2e4. (retry.delay * retry.backoff \ub294 \uc544\ub2c8\uace0 random \ub3c4 \uc801\uc6a9\ub418\ub2c8 \ucc38\uace0\ud558\uc138\uc694.)</p>\n<p>sink \ubcc4 drop \uc218\uc640 latency \ud1b5\uacc4\ub97c \uae30\ub85d\ud558\ub2c8 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. (\ud574\ub2f9 \ub0b4\uc6a9\uc740\u00a0metricssystem context\uc5d0\uc11c \ucde8\uae09\ud569\ub2c8\ub2e4.)</p>\n<p>source\ub3c4 \ubd88\ud544\uc694\ud558\ub2e4\uace0 \ud310\ub2e8\ub418\ub294 \uc815\ubcf4\ub294 \ud544\ud130\ub9c1\ud560 \uc218 \uc788\uace0 \uc81c\uacf5\ub418\ub294 \ud544\ud130 \uc885\ub958\ub294</p>\n<ul>\n<li>source filter</li>\n<li>record filter</li>\n<li>metric filter</li>\n</ul>\n<p>\uac01 \ud544\ud130\ub294 org.apache.hadoop.metrics2.MetricsFilter \ub97c \uad6c\ud604\ud558\uba74 \ub429\ub2c8\ub2e4. \ud558\uc704 \ud074\ub798\uc2a4\ub85c GlobFilter, RegexFilter, AbstractPatternFilter \ub4f1\uc774 \uc788\uc2b5\ub2c8\ub2e4.</p>\n<p>\ub4dc\ub798\ud504\ud2b8 \ubb38\uc11c \uc815\ub9ac\ub97c \uc704\ud574 \ube60\ub974\uac8c \uc815\ub9ac\ud588\uc2b5\ub2c8\ub2e4. \ud558\ub461\uc744 \uc81c\ub300\ub85c \uacf5\ubd80\ud558\uc9c8 \uc54a\uc544\uc11c \uc608\uc804 \uae30\uc5b5 \ub5a0\uc62c\ub9ac\uba70 \uc791\uc131\ud588\uc2b5\ub2c8\ub2e4. \ud2c0\ub9b0\uac8c \uc788\uc73c\uba74 \ud53c\ub4dc\ubc31 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4. :-)</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/hadoop/\">Hadoop</a>, <a href=\"http://blog.geekple.com/tag/hadoop-metrics/\">hadoop-metrics</a>, <a href=\"http://blog.geekple.com/tag/metrics/\">metrics</a>, <a href=\"http://blog.geekple.com/tag/metrics1/\">metrics1</a>, <a href=\"http://blog.geekple.com/tag/metrics2/\">metrics2</a> "}, "published": 1361815231, "categories": []}, {"updated": 1361780031, "alternate": [{"href": "http://blog.geekple.com/2013/02/25/update-alternatives/", "type": "text/html"}], "title": "update-alternatives", "author": "Daegeun Kim", "content": {"content": "<p>\ubcf4\ud1b5 \ucee4\ub9e8\ub4dc\ub77c\uc778\uc5d0\uc11c \uba85\ub839\uc5b4\ub97c \uce58\uace0 \uacb0\uacfc\ub97c \uae30\ub2e4\ub9bd\ub2c8\ub2e4. \uac00\ub054 \ub9cc\ub098\ub294 \uc5d0\ub7ec \uc911 \ud558\ub098\ub294 \u201ccommand not found\u201d \uc774\uba70 \ubd80\ub52a\ud788\uace0 \uc2f6\uc9c0 \uc54a\uc744 \ub550 \ubbf8\ub9ac\ubbf8\ub9ac PATH\ub97c \ub4f1\ub85d\ud574\ub450\uba74 \ub429\ub2c8\ub2e4. \uc774 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c \uc124\uba85\ud558\ub824\ub294 \uae30\ub2a5\uc740 update-alternatives \ub610\ub294 alternatives \ub77c\ub294 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4. PATH \ub9d0\uace0 \ub2e4\ub978 \ubc29\ubc95\uc73c\ub85c \uc774\ub97c \ud574\uacb0\ud569\ub2c8\ub2e4.</p>\n<p>update-alternatives \uba85\ub839\uc5b4\ub97c \uc815\uc0c1\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\uba74 \uacb0\uacfc\ub294 /etc/alternatives \ub77c\ub294 \ub514\ub809\ud1a0\ub9ac\uc5d0 \uae30\ub85d\ub429\ub2c8\ub2e4. \uc544\ub798\uc640 \uac19\uc740 \uba85\ub839\uc5b4\ub85c \ud655\uc778\ud574\ubcf4\uba74</p>\n\n$ ls -l /etc/alternatives/\ntotal 0\nlrwxrwxrwx  1 root root 55 Feb 12 04:19 appletviewer -&gt; /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/appletviewer\nlrwxrwxrwx  1 root root 56 Feb 12 04:19 appletviewer.1.gz -&gt; /usr/share/man/man1/appletviewer-java-1.6.0-openjdk.1.gz\nlrwxrwxrwx  1 root root 46 Feb 12 04:19 apt -&gt; /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/apt\nlrwxrwxrwx  1 root root 47 Feb 12 04:19 apt.1.gz -&gt; /usr/share/man/man1/apt-java-1.6.0-openjdk.1.gz\nlrwxrwxrwx  1 root root 51 Feb 12 04:19 extcheck -&gt; /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/extcheck\nlrwxrwxrwx  1 root root 52 Feb 12 04:19 extcheck.1.gz -&gt; /usr/share/man/man1/extcheck-java-1.6.0-openjdk.1.gz\nlrwxrwxrwx  1 root root 21 Feb 12 04:25 flume-conf -&gt; /etc/flume/conf.empty\nlrwxrwxrwx  1 root root 21 Feb 12 04:29 giraph-conf -&gt; /etc/giraph/conf.dist\nlrwxrwxrwx  1 root root 22 Feb 12 04:24 hadoop-conf -&gt; /etc/hadoop/conf.empty\nlrwxrwxrwx  1 root root 20 Feb 12 04:24 hbase-conf -&gt; /etc/hbase/conf.dist\nlrwxrwxrwx  1 root root 19 Feb 12 04:28 hive-conf -&gt; /etc/hive/conf.dist\nlrwxrwxrwx  1 root root 46 Feb 12 04:19 jar -&gt; /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/jar\nlrwxrwxrwx  1 root root 47 Feb 12 04:19 jar.1.gz -&gt; /usr/share/man/man1/jar-java-1.6.0-openjdk.1.gz\nlrwxrwxrwx  1 root root 52 Feb 12 04:19 jarsigner -&gt; /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/jarsigner\nlrwxrwxrwx  1 root root 53 Feb 12 04:19 jarsigner.1.gz -&gt; /usr/share/man/man1/jarsigner-java-1.6.0-openjdk.1.gz\nlrwxrwxrwx  1 root root 46 Feb 12 04:18 java -&gt; /usr/lib/jvm/jre-1.6.0-openjdk.x86_64/bin/java\nlrwxrwxrwx  1 root root 48 Feb 12 04:18 java.1.gz -&gt; /usr/share/man/man1/java-java-1.6.0-openjdk.1.gz\nlrwxrwxrwx  1 root root 48 Feb 12 04:19 javac -&gt; /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/javac\nlrwxrwxrwx  1 root root 49 Feb 12 04:19 javac.1.gz -&gt; /usr/share/man/man1/javac-java-1.6.0-openjdk.1.gz\nlrwxrwxrwx  1 root root 50 Feb 12 04:19 javadoc -&gt; /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/javadoc\nlrwxrwxrwx  1 root root 51 Feb 12 04:19 javadoc.1.gz -&gt; /usr/share/man/man1/javadoc-java-1.6.0-openjdk.1.gz\n\u2026\n\n$ which javac\n/usr/bin/javac\n\n$ readlink /usr/bin/javac\n/etc/alternatives/javac\n\n<p>\uc704\uc640 \uac19\uc740 \uacb0\uacfc\ub97c \ubcf4\uba74 \uc54c \uc218 \uc788\ub4ef\uc774 \ubaa8\ub450 link \ud30c\uc77c\uc785\ub2c8\ub2e4.</p>\n<p>\uc0ac\uc6a9 \ubc29\ubc95\uc740 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4. (\ub2e8\uc21c \uc608\uc81c)</p>\n\n$ mkdir /usr/lib/scala29\n$ wget http://www.scala-lang.org/downloads/distrib/files/scala-2.9.2.tgz\n$ wget http://www.scala-lang.org/downloads/distrib/files/scala-2.9.3-RC2.tgz\n\n$ tar xvfz scala-2.9.2.tgz\n$ tar xvfz scala-2.9.3-RC2.tgz\n\n$ update-alternatives --install /usr/bin/scala scala /usr/lib/scala29/scala-2.9.2/bin/scala 5\n$ readlink /etc/alternatives/scala\n/usr/lib/scala29/scala-2.9.2/bin/scala\n$ update-alternatives --install /usr/bin/scala scala /usr/lib/scala29/scala-2.9.3-RC2/bin/scala 10\n$ readlink /etc/alternatives/scala\n/usr/lib/scala29/scala-2.9.3-RC2/bin/scala\n$ update-alternatives --remove scala &#96;readlink /etc/alternatives/scala&#96;\n$ readlink /etc/alternatives/scala\n/usr/lib/scala29/scala-2.9.2/bin/scala\n\n<p>\uad73\uc774 \uadc0\ucc2e\uac8c PATH\uc5d0 \ub4f1\ub85d\ud560 \ud544\uc694\ub294 \uc5c6\uc2b5\ub2c8\ub2e4.</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/alternatives/\">alternatives</a>, <a href=\"http://blog.geekple.com/tag/update-alternatives/\">update-alternatives</a> "}, "published": 1361780031, "categories": []}, {"updated": 1360859240, "alternate": [{"href": "http://blog.geekple.com/2013/02/15/oozie-install/", "type": "text/html"}], "title": "Oozie Install", "author": "Daegeun Kim", "content": {"content": "<p>Apache oozie \uc124\uce58\uac00 \uc0dd\uac01\ubcf4\ub2e4 \uae4c\ub2e4\ub86d\uae30\uc5d0 \ubbf8\ub9ac \ube14\ub85c\uadf8\uc5d0 \uc815\ub9ac\ud569\ub2c8\ub2e4. \ud604\uc7ac oozie \ucd5c\uc2e0 \ubc84\uc804\uc740 3.3.1 \uc774\ub2c8 \uc800\ub3c4 \uadf8 \ubc84\uc804\uc744 \uae30\uc900\uc73c\ub85c \uc815\ub9ac\ud569\ub2c8\ub2e4. (\uc0ac\ub0b4\uc5d0\uc11c \uc218\uc815\ud574\uc11c \uc0ac\uc6a9\ud558\ub294 \uac83\uc740 \uc774 \ubcf4\ub2e4 \ud558\uc704\ubc84\uc804) \uc77c\ub2e8 \uba3c\uc800 \ud558\ub461\uc744 \uac04\ub2e8\ud558\uac8c \uc124\uce58\ud569\ub2c8\ub2e4. \uc800\ub294 \ud558\ub461 1.0.4 \ubc84\uc804\uc73c\ub85c \uc124\uce58\ud574\ubcfc\uaed8\uc694.</p>\n<p>\ud655\uc2e4\ud558\uac8c oozie \ub294 \uc18c\uc2a4\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ubc1b\uc544\uc11c \ucef4\ud30c\uc77c\ud55c \ud6c4 \uc124\uce58\ud569\ub2c8\ub2e4.</p>\n\n$ wget http://mirror.apache-kr.org/oozie/3.3.1/oozie-3.3.1.tar.gz\n$ tar xvfz oozie-3.3.1.tar.gz\n$ cd oozie-3.3.1\n$ ./bin/mkdistro.sh -DskipTests\n...(maven \uc791\uc5c5...)\n\n<p>\uc5ec\uae30\uae4c\uc9c0 \uc791\uc5c5\ud558\uba74 \ucef4\ud30c\uc77c \ubc0f \ud328\ud0a4\uc9d5\uae4c\uc9c0 \uc644\ub8cc\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4.</p>\n<p>\ud328\ud0a4\uc9c0\ub41c tar\ud30c\uc77c\uc744 \uac00\uc9c0\uace0 \ubc30\ud3ec\ud574\uc11c \uc124\uce58\uc791\uc5c5\uc744 \uc9c4\ud589\ud569\ub2c8\ub2e4.</p>\n\n$ export OOZIE_HOME&#61;&#34;/path/oozie&#34;\n$ export HADOOP_HOME&#61;&#34;/path/hadoop&#34;\n$ mv distro/target/oozie-3.3.1-distro.tar.gz &#96;dirname $OOZIE_HOME&#96;\n$ cd &#96;dirname $OOZIE_HOME&#96;\n$ tar xvfz oozie-3.3.1-distro.tar.gz\n$ ln -s oozie-3.3.1 oozie\n$ cd oozie\n$ wget http://dev.sencha.com/deploy/ext-2.2.1.zip &amp;&amp; unzip ext-2.2.1.zip -d ext-2.2.1\n$ ./bin/oozie-setup.sh -hadoop 0.20.2 $HADOOP_HOME -extjs ext-2.2.1 -jars &#34;$HADOOP_HOME/lib/commons-configuration-1.6.jar:$HADOOP_HOME/lib/jackson-core-asl-1.8.8.jar:$HADOOP_HOME/lib/jackson-mapper-asl-1.8.8.jar&#34;\n\n<p>\ud558\ub461\ubc84\uc804\uc774 1.0.4\ub97c \uc0ac\uc6a9\ud558\uc9c0\ub9cc \uc124\uce58\uc2dc\uc5d0 \ubc84\uc804\uc740 0.20.2\ub85c \uc791\uc131\ud558\uc2dc\uba74 \ub429\ub2c8\ub2e4. \ud558\ub461 \ubc84\uc804\uc5d0 \ub530\ub77c\uc11c core \ub610\ub294 common \ub4f1\uc73c\ub85c \ub098\ub258\uae30\ub54c\ubb38\uc5d0 \uadf8\uac78 \uad6c\ubd84\ud558\uae30 \uc704\ud55c \ub2e8\uc21c\ud55c \uc815\ubcf4\uc5d0 \ubd88\uacfc\ud569\ub2c8\ub2e4.</p>\n<p>\uae30\ubcf8 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub294 derby\uace0, \uc9c0\uc6d0\ud558\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub85c\ub294 hsqldb, mysql, postresql, oracle \ub4f1\uc774 \uc788\uc2b5\ub2c8\ub2e4. hsqldb, derby, postgresql\uc740 jdbc driver\ub97c \uc81c\uacf5\ud558\uc9c0\ub9cc \uadf8 \uc678\ub294 \uc81c\uacf5\ud558\uc9c0 \uc54a\uc544\uc11c \ub530\ub85c \uc124\uce58\ud558\uc154\uc57c\ud569\ub2c8\ub2e4. (oozie-setup.sh \uc218\ud589\uc2dc -jars \uc5d0 \ud3ec\ud568\ud558\uc2dc\uba74 \ub429\ub2c8\ub2e4.)</p>\n\n$ ./bin/ooziedb.sh create -sqlfile oozie.sql -run\n$ ./bin/oozie-start.sh\n\n<p>\ub2e4\ub978 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud558\uc2e4\ubd84\uc740 conf/oozie-site.xml\uc5d0\uc11c oozie.service.JPAService.jdbc.* \uac12\uc744 \uc218\uc815\ud558\uc2dc\uba74 \ub429\ub2c8\ub2e4. \uc544\ub798 \uac12 \uc911 \u201coozie.service.JPAService.create.db.schema\u201d \uc774 \uac12\uc744 true\ub85c \ud574\uc57c \uc2a4\ud0a4\ub9c8\uac00 \uc5c6\uc744 \ub54c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p>\n\n  oozie.db.schema.name&#61;oozie\n  oozie.service.JPAService.create.db.schema&#61;true\n  oozie.service.JPAService.validate.db.connection&#61;false\n  oozie.service.JPAService.jdbc.driver&#61;org.hsqldb.jdbcDriver\n  oozie.service.JPAService.jdbc.url&#61;jdbc:hsqldb:mem:${oozie.db.schema.name}\n  oozie.service.JPAService.jdbc.username&#61;sa\n  oozie.service.JPAService.jdbc.password&#61;\n  oozie.service.JPAService.pool.max.active.conn&#61;10\n\n\n$ export OOZIE_URL&#61;http://localhost:11000/oozie\n$ $OOZIE_HOME/bin/oozie admin -status\nSystem mode: NORMAL\n\n<p>$HADOOP_HOME/conf/hdfs-site.xml \ud30c\uc77c\uc744 \uc5f4\uc5b4\uc11c proxyuser \uc124\uc815\uc744 \ud569\ub2c8\ub2e4.</p>\n\n...\n  &lt;property&gt;\n    &lt;name&gt;hadoop.proxyuser.[USER].groups&lt;/name&gt;\n    &lt;value&gt;[GROUPS]&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;name&gt;hadoop.proxyuser.[USER].hosts&lt;/name&gt;\n    &lt;value&gt;[HOSTS]&lt;/value&gt;\n  &lt;/property&gt;\n...\n\n<p>GROUPS, HOSTS\ub294 \uadf8\ub0e5 \u201c*\u201d\ub85c \ud558\uc154\ub3c4 \ub418\uc9c0\ub9cc \ud638\uc2a4\ud2b8\uc774\ub098 \uadf8\ub8f9\uba85\uc744 \uc27c\ud45c\ub85c \uad6c\ubd84\ud558\uc5ec \uc791\uc131\ud558\uc154\ub3c4 \ub429\ub2c8\ub2e4. \uc544 \uadf8\ub9ac\uace0 \uc911\uc694\ud55c \uac83\uc740 M/R\uc791\uc5c5\uc2dc \ud544\uc694\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac\ub4f1\uc774 \uc788\ub294\ub370 \uc774\ub97c \ubbf8\ub9ac HDFS\uc5d0 \uc62c\ub824\ub46c\uc57c\ud569\ub2c8\ub2e4. \ud328\ud0a4\uc9d5\ud560 \ub54c \uac19\uc774 \ud568\uaed8 \ub4e4\uc5b4\uc788\uc73c\ub2c8 \uadf8\uac78 \ud480\uace0 \uc62c\ub9ac\uba74 \ub429\ub2c8\ub2e4.</p>\n\n$ cd $OOZIE_HOME\n$ tar xvfz oozie-sharelib-3.3.1.tar.gz\n$ $HADOOP_HOME/bin/hadoop dfs -put share share\n\n<p>\uadf8\ub7fc \uac04\ub2e8\ud558\uac8c \uc0d8\ud50c\uc744 \uac00\uc9c0\uace0 \uc81c\ub300\ub85c \uc124\uce58\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.</p>\n\n$ export PATH&#61;$PATH:$HADOOP_HOME/bin:$OOZIE_HOME/bin\n$ tar xvfz oozie-examples.tar.gz\n$ hadoop dfs -put examples/input-data examples/input-data\n$ hadoop dfs -put examples/apps/streaming/workflow.xml examples/apps/streaming/workflow.xml\n$ vi examples/apps/streaming/job.properties\n# \uc801\uc808\ud788 \uac12\uc744 \uc218\uc815\ud569\ub2c8\ub2e4.\n$ oozie job -run -config examples/apps/streaming/job.properties\njob: xxxxx\n$ oozie job -info xxxxx\nJob ID : xxxxx\n------------------------------------------------------------------------------------------------------------------------------------\nWorkflow Name : streaming-wf\nApp Path      : hdfs://\nStatus        : RUNNING\nRun           : 0\nUser          :\nGroup         : -\nCreated       : 2013-02-14 22:49 GMT\nStarted       : 2013-02-14 22:49 GMT\nLast Modified : 2013-02-14 22:49 GMT\nEnded         : -\nCoordAction ID: -\n\nActions\n------------------------------------------------------------------------------------------------------------------------------------\nID                                                                            Status    Ext ID                 Ext Status Err Code\n------------------------------------------------------------------------------------------------------------------------------------\nxxxxx&#64;:start:                                                                 OK        -                      OK         -\n------------------------------------------------------------------------------------------------------------------------------------\nxxxxx&#64;streaming-node                                                          RUNNING   job_201302142152_0017  RUNNING    -\n------------------------------------------------------------------------------------------------------------------------------------\n\n<p>\u00a0</p>\n\n$ hadoop dfs -ls examples/output-data/streaming\n\nFound 3 items\n-rw-r--r--   3 hadoop supergroup          0 2013-02-14 22:51 /user/[User]/examples/output-data/streaming/_SUCCESS\ndrwxr-xr-x   - hadoop supergroup          0 2013-02-14 22:51 /user/[User]/examples/output-data/streaming/_logs\n-rw-r--r--   3 hadoop supergroup         25 2013-02-14 22:51 /user/[User]/examples/output-data/streaming/part-00000\n\n<p>\ub05d~</p>\n<br> Tagged: <a href=\"http://blog.geekple.com/tag/hadoop/\">Hadoop</a>, <a href=\"http://blog.geekple.com/tag/oozie/\">oozie</a> "}, "published": 1360859240, "categories": []}], "updated": 1366505175, "description": {"content": "\uac1c\uc778 \ud63c\uc790 \ubcf4\uae30\uc704\ud55c \ubcf4\uad00\uc740 \uad1c\ucc2e\uc9c0\ub9cc \uce74\ud398, \ube14\ub85c\uadf8\uc5d0 \ubcf8\ubb38 \ud37c\uac10\uc740 \uc0bc\uac00\uc8fc\uc138\uc694. \ubb50 \ubd80\ub044\ub7ec\uc6b4 \uae00\uc740 \uc5ec\uae30\uc11c\ub9cc \ubcf4\ub294\uac78\ub85c~"}, "fid": "FLtiw", "title": "Dani's Notes"}